# ë ˆí¼ëŸ´ ìºì‹œë°± ì‹œìŠ¤í…œ ì„¤ê³„ì„œ

## ğŸ“‹ ëª©ì°¨
1. [ì‹œìŠ¤í…œ ê°œìš”](#ì‹œìŠ¤í…œ-ê°œìš”)
2. [êµ¬í˜„ ë°©ì‹ ë¹„êµ](#êµ¬í˜„-ë°©ì‹-ë¹„êµ)
3. [ë°ì´í„° êµ¬ì¡° ì„¤ê³„](#ë°ì´í„°-êµ¬ì¡°-ì„¤ê³„)
4. [êµ¬í˜„ ë‹¨ê³„](#êµ¬í˜„-ë‹¨ê³„)
5. [ì¹´í˜24 ì—°ë™ ë°©ì•ˆ](#ì¹´í˜24-ì—°ë™-ë°©ì•ˆ)
6. [ë³´ì•ˆ ë° ê²€ì¦](#ë³´ì•ˆ-ë°-ê²€ì¦)

---

## ì‹œìŠ¤í…œ ê°œìš”

### ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­
âœ… ì†Œë¹„ìê°€ ê³µêµ¬ ìƒí’ˆ í˜ì´ì§€ì—ì„œ ì¹œêµ¬ì—ê²Œ ê³µìœ 
âœ… ê³µìœ ë°›ì€ ì¹œêµ¬ê°€ êµ¬ë§¤í•˜ë©´ ë‘˜ ë‹¤ ìºì‹œë°± ë°›ìŒ
âœ… ì¹´í˜24 ì‡¼í•‘ëª°ê³¼ ì—°ë™

### ì‚¬ìš©ì í”Œë¡œìš°
```
ì†Œë¹„ì A (ê³µìœ ì)
  â””â”€> ê³µêµ¬ ìƒí’ˆ í˜ì´ì§€ ë°©ë¬¸
  â””â”€> "ì¹œêµ¬ ì´ˆëŒ€" ë²„íŠ¼ í´ë¦­
  â””â”€> ë ˆí¼ëŸ´ ë§í¬ ìƒì„±: https://moyeoradeal.com/deal?id=deal456&ref=ABC123
  â””â”€> ì¹´ì¹´ì˜¤í†¡/ë¬¸ìë¡œ ì¹œêµ¬ì—ê²Œ ê³µìœ 

ì†Œë¹„ì B (í”¼ì¶”ì²œì¸)
  â””â”€> ë ˆí¼ëŸ´ ë§í¬ í´ë¦­
  â””â”€> ì¹´í˜24 ì‡¼í•‘ëª°ë¡œ ì´ë™ (ë ˆí¼ëŸ´ ì½”ë“œ ìë™ í¬í•¨)
  â””â”€> ìƒí’ˆ êµ¬ë§¤
  â””â”€> ì£¼ë¬¸ ì™„ë£Œ â†’ ì¹´í˜24 ì£¼ë¬¸ ë°ì´í„°ì— ë ˆí¼ëŸ´ ì½”ë“œ ì €ì¥

ì‹œìŠ¤í…œ (ìë™ ì²˜ë¦¬)
  â””â”€> ì¹´í˜24 ì£¼ë¬¸ ë™ê¸°í™” (1ì‹œê°„ë§ˆë‹¤ or ìˆ˜ë™)
  â””â”€> ë ˆí¼ëŸ´ ì½”ë“œ ì¶”ì¶œ ë° ê²€ì¦
  â””â”€> ìºì‹œë°± ì ë¦½ (A: 5,000ì›, B: 3,000ì›)
  â””â”€> ì •ì‚° ì‹œ ìºì‹œë°± ë°˜ì˜
```

---

## êµ¬í˜„ ë°©ì‹ ë¹„êµ

### ë°©ë²• 1: ì¹´í˜24 ì£¼ë¬¸ ë©”ëª¨ í™œìš© âš ï¸
**ë‚œì´ë„:** í•˜
**ê°œë°œ ê¸°ê°„:** 1-2ì¼

**ì¥ì :**
- ì¹´í˜24 ê¸°ì¡´ ê¸°ëŠ¥ë§Œ ì‚¬ìš©
- ì¶”ê°€ ì¹´í˜24 ì„¤ì • ë¶ˆí•„ìš”
- ë¹ ë¥¸ í”„ë¡œí† íƒ€ì… ê°€ëŠ¥

**ë‹¨ì :**
- âŒ ì†Œë¹„ìê°€ ìˆ˜ë™ìœ¼ë¡œ ì½”ë“œ ì…ë ¥ í•„ìš” (UX ë‚˜ì¨)
- âŒ ì…ë ¥ ì˜¤ë¥˜ ê°€ëŠ¥ì„± ë†’ìŒ
- âŒ ì „í™˜ìœ¨ ë‚®ìŒ

**êµ¬í˜„ íë¦„:**
```javascript
// 1. ê³µìœ  í˜ì´ì§€
<div class="share-box">
  <p>ì¶”ì²œ ì½”ë“œ: <strong id="referral-code">ABC123</strong></p>
  <button onclick="copyCode()">ì½”ë“œ ë³µì‚¬</button>
  <p>âš ï¸ ì£¼ë¬¸ ì‹œ "ìš”ì²­ì‚¬í•­"ì— ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
</div>

// 2. ì£¼ë¬¸ ë™ê¸°í™” ì‹œ ë©”ëª¨ íŒŒì‹±
function extractReferralCode(buyerMemo) {
  const match = buyerMemo?.match(/[A-Z0-9]{6}/); // "ABC123" íŒ¨í„´
  return match ? match[0] : null;
}
```

---

### ë°©ë²• 2: ì¹´í˜24 ì‚¬ìš©ì ì •ì˜ í•„ë“œ + ì¿ í‚¤ â­ (ê¶Œì¥)
**ë‚œì´ë„:** ì¤‘
**ê°œë°œ ê¸°ê°„:** 3-5ì¼

**ì¥ì :**
- âœ… ì™„ì „ ìë™ ì¶”ì  (ì‚¬ìš©ì ì•¡ì…˜ ë¶ˆí•„ìš”)
- âœ… ë†’ì€ ì „í™˜ìœ¨
- âœ… í™•ì¥ì„± ì¢‹ìŒ (ì¶”í›„ ë‹¤ì–‘í•œ ë§ˆì¼€íŒ… í™œìš©)

**ë‹¨ì :**
- ì¹´í˜24 ì‚¬ìš©ì ì •ì˜ í•„ë“œ ì„¤ì • í•„ìš”
- ì¿ í‚¤ ê´€ë¦¬ í•„ìš”

**êµ¬í˜„ íë¦„:**
```javascript
// 1. ë ˆí¼ëŸ´ ë§í¬ í´ë¦­ ì‹œ ì¿ í‚¤ ì €ì¥
// ëœë”© í˜ì´ì§€: /deal.html?id=deal456&ref=ABC123
const urlParams = new URLSearchParams(window.location.search);
const referralCode = urlParams.get('ref');
if (referralCode) {
  // 7ì¼ê°„ ìœ íš¨í•œ ì¿ í‚¤ ì €ì¥
  document.cookie = `moyeora_ref=${referralCode}; max-age=604800; path=/`;

  // Firestoreì— í´ë¦­ ì¶”ì 
  await db.collection('referrals').doc(referralCode).update({
    clicks: firebase.firestore.FieldValue.increment(1),
    lastClickAt: new Date()
  });
}

// 2. ì¹´í˜24ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹œ ì¿ í‚¤ ê°’ì„ URLì— í¬í•¨
function redirectToCafe24(productUrl) {
  const referralCode = getCookie('moyeora_ref');
  if (referralCode) {
    // ì¹´í˜24 ìƒí’ˆ í˜ì´ì§€ URLì— ì¶”ê°€
    window.location.href = `${productUrl}?ref=${referralCode}`;
  } else {
    window.location.href = productUrl;
  }
}

// 3. ì¹´í˜24 ì„¤ì •: ì‚¬ìš©ì ì •ì˜ í•„ë“œ ì¶”ê°€
// ì¹´í˜24 ê´€ë¦¬ì > ìƒí’ˆ > ì‚¬ìš©ì ì •ì˜ í•„ë“œ
// í•„ë“œëª…: referral_code (í…ìŠ¤íŠ¸, ìµœëŒ€ 20ì)

// 4. ì£¼ë¬¸ ë™ê¸°í™” ì‹œ ì‚¬ìš©ì ì •ì˜ í•„ë“œ ì½ê¸°
const ordersData = await callCafe24Api(
  mallId,
  accessToken,
  `/api/v2/admin/orders?embed=items,receivers&start_date=${startDateStr}`
);

for (const order of ordersData.orders) {
  const referralCode = order.additional_information?.referral_code;

  if (referralCode) {
    await trackReferralPurchase({
      orderId: order.order_id,
      referralCode: referralCode,
      purchaseAmount: order.payment_amount,
      productNo: order.items[0].product_no
    });
  }
}
```

---

### ë°©ë²• 3: Firebase Dynamic Links + ì¹´í˜24 Webhook âš¡ (ìµœì )
**ë‚œì´ë„:** ìƒ
**ê°œë°œ ê¸°ê°„:** 5-7ì¼

**ì¥ì :**
- âœ… ì•±/ì›¹ ëª¨ë‘ ì§€ì›
- âœ… ë”¥ë§í¬ ì§€ì› (ì•± ì„¤ì¹˜ ìœ ë„ ê°€ëŠ¥)
- âœ… ì‹¤ì‹œê°„ ì•Œë¦¼ (Webhook)

**ë‹¨ì :**
- Firebase Dynamic Links ì„¤ì • í•„ìš”
- ì¹´í˜24 Webhook ì„¤ì • í•„ìš” (ê°œë°œì ì•±)
- ì´ˆê¸° ê°œë°œ ë¹„ìš© ë†’ìŒ

**êµ¬í˜„ íë¦„:**
```javascript
// 1. Firebase Dynamic Link ìƒì„±
async function createReferralLink(dealId, userId) {
  const longLink = `https://moyeoradeal.page.link/?link=https://moyeoradeal.com/deal/${dealId}?ref=${userId}&apn=com.moyeoradeal.app&ibi=com.moyeoradeal`;

  const response = await fetch('https://firebasedynamiclinks.googleapis.com/v1/shortLinks', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      dynamicLinkInfo: { dynamicLinkDomain: 'moyeoradeal.page.link', link: longLink },
      suffix: { option: 'SHORT' }
    })
  });

  const { shortLink } = await response.json();
  return shortLink; // https://moyeoradeal.page.link/xyz123
}

// 2. ì¹´í˜24 Webhook ì„¤ì • (ì£¼ë¬¸ ìƒì„± ì‹œ ìë™ í˜¸ì¶œ)
// Cloud Functionìœ¼ë¡œ Webhook ì—”ë“œí¬ì¸íŠ¸ ìƒì„±
exports.cafe24OrderWebhook = functions.https.onRequest(async (req, res) => {
  const { order_id, member_id, product_no } = req.body;

  // ë ˆí¼ëŸ´ ì½”ë“œ ì¶”ì¶œ (ì‚¬ìš©ì ì •ì˜ í•„ë“œ or ì¿ í‚¤)
  const referralCode = req.body.additional_information?.referral_code;

  if (referralCode) {
    // ì¦‰ì‹œ ìºì‹œë°± ì ë¦½
    await grantCashback(referralCode, order_id, product_no);
  }

  res.status(200).send('OK');
});
```

---

## ë°ì´í„° êµ¬ì¡° ì„¤ê³„

### Firestore ì»¬ë ‰ì…˜

#### 1. `referrals` (ë ˆí¼ëŸ´ ì¶”ì )
```javascript
{
  // ë¬¸ì„œ ID: ë ˆí¼ëŸ´ ì½”ë“œ (ì˜ˆ: "ABC123XYZ")
  referralCode: "ABC123XYZ",           // ê³ ìœ  ì¶”ì²œ ì½”ë“œ
  referrerId: "user_kakao_12345",     // ì¶”ì²œì¸ ID (ê³µìœ ì)
  referrerName: "ê¹€ëª¨ì—¬",              // ì¶”ì²œì¸ ì´ë¦„ (ì„ íƒ)
  dealId: "deal_20260112_001",        // ê³µêµ¬ ID
  dealTitle: "í”„ë¦¬ë¯¸ì—„ ê±´ì¡°ë§ê³  1kg",  // ê³µêµ¬ëª…
  productId: "prod_mango_001",        // ìƒí’ˆ ID
  cafe24ProductNo: "12345",           // ì¹´í˜24 ìƒí’ˆë²ˆí˜¸

  // ë‚ ì§œ ì •ë³´
  createdAt: Timestamp,               // ìƒì„±ì¼ì‹œ
  expiresAt: Timestamp,               // ë§Œë£Œì¼ì‹œ (30ì¼ í›„)

  // ì¶”ì  ì§€í‘œ
  clicks: 15,                         // í´ë¦­ ìˆ˜
  conversions: 3,                     // êµ¬ë§¤ ì „í™˜ ìˆ˜
  totalSales: 150000,                 // ì´ ë§¤ì¶œ (ì›)

  // ìºì‹œë°± ì •ë³´
  referrerCashback: 15000,            // ì¶”ì²œì¸ ìºì‹œë°± (5,000ì› Ã— 3ê±´)
  refereeCashback: 9000,              // í”¼ì¶”ì²œì¸ ìºì‹œë°± (3,000ì› Ã— 3ê±´)
  totalCashback: 24000,               // ì´ ìºì‹œë°±

  // ìƒíƒœ
  status: "active",                   // active | expired | disabled

  // ë©”íƒ€ ì •ë³´
  channel: "kakao",                   // ê³µìœ  ì±„ë„ (kakao | sms | link)
  deviceType: "mobile",               // mobile | desktop

  // ì—°ê²°ëœ êµ¬ë§¤ë“¤
  purchases: [
    {
      orderId: "20260112-0001234",
      purchaserId: "user_kakao_67890",
      purchaseDate: Timestamp,
      amount: 50000,
      referrerReward: 5000,
      refereeReward: 3000,
      status: "completed"             // pending | completed | cancelled
    }
  ]
}
```

#### 2. `cashbacks` (ìºì‹œë°± ì ë¦½ ë‚´ì—­)
```javascript
{
  // ë¬¸ì„œ ID: ìë™ ìƒì„±
  userId: "user_kakao_12345",         // ì‚¬ìš©ì ID
  userName: "ê¹€ëª¨ì—¬",                  // ì‚¬ìš©ì ì´ë¦„
  userType: "referrer",               // referrer | referee

  // ê¸ˆì•¡ ì •ë³´
  amount: 5000,                       // ìºì‹œë°± ê¸ˆì•¡ (ì›)
  remainingAmount: 5000,              // ì”ì—¬ ê¸ˆì•¡ (ì‚¬ìš© í›„ ì°¨ê°)

  // ì—°ê²° ì •ë³´
  referralCode: "ABC123XYZ",          // ë ˆí¼ëŸ´ ì½”ë“œ
  orderId: "20260112-0001234",        // ì¹´í˜24 ì£¼ë¬¸ ID
  dealId: "deal_20260112_001",        // ê³µêµ¬ ID

  // ë‚ ì§œ ì •ë³´
  earnedAt: Timestamp,                // ì ë¦½ì¼ì‹œ
  expiresAt: Timestamp,               // ë§Œë£Œì¼ì‹œ (1ë…„ í›„)
  usedAt: Timestamp,                  // ì‚¬ìš©ì¼ì‹œ (nullì´ë©´ ë¯¸ì‚¬ìš©)

  // ìƒíƒœ
  status: "active",                   // active | used | expired | cancelled

  // ì‚¬ìš© ë‚´ì—­
  usedFor: null,                      // ì‚¬ìš©ì²˜ (ì£¼ë¬¸ ID ë“±)
  usedAmount: 0                       // ì‚¬ìš© ê¸ˆì•¡
}
```

#### 3. `users` (ì‚¬ìš©ì ì •ë³´ì— ìºì‹œë°± ìš”ì•½ ì¶”ê°€)
```javascript
{
  // ê¸°ì¡´ í•„ë“œë“¤...
  userId: "user_kakao_12345",
  name: "ê¹€ëª¨ì—¬",
  email: "moyeora@example.com",

  // ë ˆí¼ëŸ´ ê´€ë ¨ ì¶”ê°€ í•„ë“œ
  referralStats: {
    totalInvites: 10,                 // ì´ ì´ˆëŒ€ ìˆ˜
    successfulConversions: 3,         // ì„±ê³µí•œ êµ¬ë§¤ ìˆ˜
    totalCashbackEarned: 15000,       // ì´ ì ë¦½ ìºì‹œë°±
    availableCashback: 12000,         // ì‚¬ìš© ê°€ëŠ¥ ìºì‹œë°±
    usedCashback: 3000,               // ì‚¬ìš©í•œ ìºì‹œë°±
    myReferralCode: "ABC123XYZ"       // ë‚´ ì¶”ì²œ ì½”ë“œ (ê³ ì •)
  }
}
```

#### 4. `cafe24_orders` (ê¸°ì¡´ ì»¬ë ‰ì…˜ì— í•„ë“œ ì¶”ê°€)
```javascript
{
  // ê¸°ì¡´ í•„ë“œë“¤...
  order_id: "20260112-0001234",
  member_id: "moyeora123",
  order_date: "2026-01-12T15:30:00",
  payment_amount: 50000,

  // ë ˆí¼ëŸ´ ê´€ë ¨ ì¶”ê°€ í•„ë“œ
  referralCode: "ABC123XYZ",          // ë ˆí¼ëŸ´ ì½”ë“œ
  referrerId: "user_kakao_12345",     // ì¶”ì²œì¸ ID
  isReferralPurchase: true,           // ë ˆí¼ëŸ´ êµ¬ë§¤ ì—¬ë¶€
  cashbackProcessed: true,            // ìºì‹œë°± ì²˜ë¦¬ ì™„ë£Œ ì—¬ë¶€
  cashbackProcessedAt: Timestamp      // ìºì‹œë°± ì²˜ë¦¬ ì¼ì‹œ
}
```

---

## êµ¬í˜„ ë‹¨ê³„

### Phase 1: ê¸°ë³¸ ë ˆí¼ëŸ´ ì‹œìŠ¤í…œ (1-2ì¼)

#### Step 1: ë ˆí¼ëŸ´ ì½”ë“œ ìƒì„±
```javascript
// admin/index.htmlì— ì¶”ê°€
async function generateReferralCode(userId, dealId) {
  // ì§§ê³  ê³ ìœ í•œ ì½”ë“œ ìƒì„± (8ìë¦¬)
  const code = Math.random().toString(36).substring(2, 10).toUpperCase();

  const referralData = {
    referralCode: code,
    referrerId: userId,
    dealId: dealId,
    createdAt: new Date(),
    expiresAt: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000), // 30ì¼ í›„
    clicks: 0,
    conversions: 0,
    status: 'active'
  };

  await db.collection('referrals').doc(code).set(referralData);
  return code;
}
```

#### Step 2: ê³µìœ  í˜ì´ì§€ UI
```html
<!-- /deal.html ë˜ëŠ” ê¸°ì¡´ ê³µêµ¬ í˜ì´ì§€ì— ì¶”ê°€ -->
<div class="referral-share-section">
  <h3>ğŸ ì¹œêµ¬ ì´ˆëŒ€í•˜ê³  í•¨ê»˜ í• ì¸ ë°›ê¸°</h3>
  <p>ì¹œêµ¬ê°€ êµ¬ë§¤í•˜ë©´ <strong>ë‹¹ì‹ </strong>ì€ 5,000ì›, <strong>ì¹œêµ¬</strong>ëŠ” 3,000ì› ìºì‹œë°±!</p>

  <div class="referral-link-box">
    <input type="text" id="referral-link" readonly value="https://moyeoradeal.com/deal?ref=ABC123">
    <button onclick="copyReferralLink()">ë§í¬ ë³µì‚¬</button>
  </div>

  <div class="share-buttons">
    <button onclick="shareKakao()">ì¹´ì¹´ì˜¤í†¡ ê³µìœ </button>
    <button onclick="shareSMS()">ë¬¸ì ê³µìœ </button>
  </div>
</div>

<script>
// ë ˆí¼ëŸ´ ë§í¬ ìƒì„± ë° ë³µì‚¬
async function copyReferralLink() {
  const userId = firebase.auth().currentUser?.uid;
  const dealId = new URLSearchParams(window.location.search).get('id');

  // ë ˆí¼ëŸ´ ì½”ë“œ ìƒì„± (DBì— ì €ì¥)
  const code = await generateReferralCode(userId, dealId);
  const referralLink = `https://moyeoradeal.com/deal?id=${dealId}&ref=${code}`;

  // í´ë¦½ë³´ë“œì— ë³µì‚¬
  await navigator.clipboard.writeText(referralLink);
  alert('âœ… ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
}

// ì¹´ì¹´ì˜¤í†¡ ê³µìœ 
function shareKakao() {
  Kakao.Link.sendDefault({
    objectType: 'feed',
    content: {
      title: 'ğŸ ì¹œêµ¬ ì´ˆëŒ€ í˜œíƒ',
      description: 'ì§€ê¸ˆ ê°€ì…í•˜ë©´ 3,000ì› ìºì‹œë°±!',
      imageUrl: 'https://moyeoradeal.com/images/deal-thumb.jpg',
      link: {
        mobileWebUrl: document.getElementById('referral-link').value,
        webUrl: document.getElementById('referral-link').value
      }
    }
  });
}
</script>
```

#### Step 3: ë ˆí¼ëŸ´ í´ë¦­ ì¶”ì 
```javascript
// /deal.html í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
window.addEventListener('DOMContentLoaded', async () => {
  const urlParams = new URLSearchParams(window.location.search);
  const referralCode = urlParams.get('ref');

  if (referralCode) {
    // ì¿ í‚¤ì— ì €ì¥ (7ì¼ê°„ ìœ íš¨)
    document.cookie = `moyeora_ref=${referralCode}; max-age=604800; path=/`;

    // Firestoreì— í´ë¦­ ì¶”ì 
    try {
      await db.collection('referrals').doc(referralCode).update({
        clicks: firebase.firestore.FieldValue.increment(1),
        lastClickAt: new Date()
      });

      console.log('âœ… ë ˆí¼ëŸ´ í´ë¦­ ì¶”ì  ì™„ë£Œ:', referralCode);
    } catch (err) {
      console.error('ë ˆí¼ëŸ´ ì¶”ì  ì˜¤ë¥˜:', err);
    }
  }
});

// ì¿ í‚¤ ì½ê¸° í•¨ìˆ˜
function getCookie(name) {
  const value = `; ${document.cookie}`;
  const parts = value.split(`; ${name}=`);
  if (parts.length === 2) return parts.pop().split(';').shift();
  return null;
}
```

---

### Phase 2: ì¹´í˜24 ì£¼ë¬¸ ì—°ë™ (2-3ì¼)

#### Step 4: ì£¼ë¬¸ ë™ê¸°í™” ì‹œ ë ˆí¼ëŸ´ ì²˜ë¦¬
```javascript
// admin/index.htmlì˜ syncCafe24Orders() í•¨ìˆ˜ ìˆ˜ì •
async function syncCafe24Orders(isAuto = false) {
  // ... ê¸°ì¡´ ì½”ë“œ ...

  for (const order of newOrders) {
    // ğŸ¯ ë ˆí¼ëŸ´ ì½”ë“œ ì¶”ì¶œ (3ê°€ì§€ ë°©ë²•)
    let referralCode = null;

    // ë°©ë²• 1: ì£¼ë¬¸ ë©”ëª¨ì—ì„œ ì¶”ì¶œ
    referralCode = extractReferralCodeFromMemo(order.buyer_memo);

    // ë°©ë²• 2: ì‚¬ìš©ì ì •ì˜ í•„ë“œì—ì„œ ì¶”ì¶œ (ì¹´í˜24 ì„¤ì • í•„ìš”)
    if (!referralCode && order.additional_information) {
      referralCode = order.additional_information.referral_code;
    }

    // ë°©ë²• 3: íšŒì› IDë¡œ ìµœê·¼ í´ë¦­í•œ ë ˆí¼ëŸ´ ì°¾ê¸°
    if (!referralCode && order.member_id) {
      referralCode = await findRecentReferralByMember(order.member_id);
    }

    const orderData = {
      order_id: order.order_id,
      member_id: order.member_id,
      order_date: order.order_date,
      payment_amount: order.payment_amount,
      items: order.items,
      buyer_name: order.buyer_name,
      // ë ˆí¼ëŸ´ ì •ë³´ ì¶”ê°€
      referralCode: referralCode,
      isReferralPurchase: !!referralCode,
      cashbackProcessed: false
    };

    batch.set(db.collection('cafe24_orders').doc(order.order_id), orderData);

    // ğŸ ë ˆí¼ëŸ´ êµ¬ë§¤ ì‹œ ì¦‰ì‹œ ìºì‹œë°± ì²˜ë¦¬
    if (referralCode) {
      await processReferralCashback(referralCode, order);
    }
  }

  await batch.commit();
}

// ì£¼ë¬¸ ë©”ëª¨ì—ì„œ ë ˆí¼ëŸ´ ì½”ë“œ ì¶”ì¶œ
function extractReferralCodeFromMemo(memo) {
  if (!memo) return null;
  // íŒ¨í„´: 8ìë¦¬ ì˜ë¬¸+ìˆ«ì (ì˜ˆ: "ABC123XY")
  const match = memo.match(/[A-Z0-9]{8}/i);
  return match ? match[0].toUpperCase() : null;
}

// íšŒì› IDë¡œ ìµœê·¼ ë ˆí¼ëŸ´ ì°¾ê¸° (7ì¼ ì´ë‚´)
async function findRecentReferralByMember(memberId) {
  const sevenDaysAgo = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000);

  // ìµœê·¼ í´ë¦­í•œ ë ˆí¼ëŸ´ ì°¾ê¸° (íšŒì› ID ë§¤í•‘ í•„ìš”)
  // TODO: ì¹´í˜24 íšŒì› IDì™€ Firebase ì‚¬ìš©ì ID ë§¤í•‘ í…Œì´ë¸” í•„ìš”

  return null; // ì„ì‹œë¡œ null ë°˜í™˜
}
```

#### Step 5: ìºì‹œë°± ì²˜ë¦¬ ë¡œì§
```javascript
// ë ˆí¼ëŸ´ êµ¬ë§¤ ì‹œ ìºì‹œë°± ì ë¦½
async function processReferralCashback(referralCode, order) {
  try {
    // 1. ë ˆí¼ëŸ´ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
    const referralDoc = await db.collection('referrals').doc(referralCode).get();
    if (!referralDoc.exists) {
      console.error('âŒ ë ˆí¼ëŸ´ ì½”ë“œê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŒ:', referralCode);
      return;
    }

    const referral = referralDoc.data();

    // ë§Œë£Œ í™•ì¸
    if (referral.expiresAt.toDate() < new Date()) {
      console.error('âŒ ë ˆí¼ëŸ´ ì½”ë“œ ë§Œë£Œ:', referralCode);
      return;
    }

    // 2. ìºì‹œë°± ê¸ˆì•¡ ê³„ì‚° (ë”œ ì„¤ì •ì— ë”°ë¼)
    const dealDoc = await db.collection('deals').doc(referral.dealId).get();
    const deal = dealDoc.data();

    const referrerReward = deal.referrerCashback || 5000;  // ì¶”ì²œì¸: 5,000ì›
    const refereeReward = deal.refereeCashback || 3000;    // í”¼ì¶”ì²œì¸: 3,000ì›

    // 3. ì¶”ì²œì¸ ìºì‹œë°± ì ë¦½
    const referrerCashback = {
      userId: referral.referrerId,
      userType: 'referrer',
      amount: referrerReward,
      remainingAmount: referrerReward,
      referralCode: referralCode,
      orderId: order.order_id,
      dealId: referral.dealId,
      earnedAt: new Date(),
      expiresAt: new Date(Date.now() + 365 * 24 * 60 * 60 * 1000), // 1ë…„ í›„
      status: 'active'
    };
    await db.collection('cashbacks').add(referrerCashback);

    // 4. í”¼ì¶”ì²œì¸ ìºì‹œë°± ì ë¦½
    const purchaserId = order.member_id; // TODO: ì¹´í˜24 íšŒì› ID â†’ Firebase UID ë³€í™˜
    const refereeCashback = {
      userId: purchaserId,
      userType: 'referee',
      amount: refereeReward,
      remainingAmount: refereeReward,
      referralCode: referralCode,
      orderId: order.order_id,
      dealId: referral.dealId,
      earnedAt: new Date(),
      expiresAt: new Date(Date.now() + 365 * 24 * 60 * 60 * 1000),
      status: 'active'
    };
    await db.collection('cashbacks').add(refereeCashback);

    // 5. ë ˆí¼ëŸ´ í†µê³„ ì—…ë°ì´íŠ¸
    await db.collection('referrals').doc(referralCode).update({
      conversions: firebase.firestore.FieldValue.increment(1),
      totalSales: firebase.firestore.FieldValue.increment(order.payment_amount),
      referrerCashback: firebase.firestore.FieldValue.increment(referrerReward),
      refereeCashback: firebase.firestore.FieldValue.increment(refereeReward),
      totalCashback: firebase.firestore.FieldValue.increment(referrerReward + refereeReward),
      'purchases': firebase.firestore.FieldValue.arrayUnion({
        orderId: order.order_id,
        purchaserId: purchaserId,
        purchaseDate: new Date(order.order_date),
        amount: order.payment_amount,
        referrerReward: referrerReward,
        refereeReward: refereeReward,
        status: 'completed'
      })
    });

    // 6. ì£¼ë¬¸ì— ìºì‹œë°± ì²˜ë¦¬ ì™„ë£Œ í‘œì‹œ
    await db.collection('cafe24_orders').doc(order.order_id).update({
      cashbackProcessed: true,
      cashbackProcessedAt: new Date()
    });

    console.log(`âœ… ìºì‹œë°± ì²˜ë¦¬ ì™„ë£Œ: ${referralCode} â†’ ì¶”ì²œì¸ ${referrerReward}ì›, í”¼ì¶”ì²œì¸ ${refereeReward}ì›`);

    // 7. ì•Œë¦¼ ì „ì†¡ (ì„ íƒ)
    await sendCashbackNotification(referral.referrerId, referrerReward);
    await sendCashbackNotification(purchaserId, refereeReward);

  } catch (err) {
    console.error('âŒ ìºì‹œë°± ì²˜ë¦¬ ì˜¤ë¥˜:', err);
  }
}
```

---

### Phase 3: ìºì‹œë°± ì‚¬ìš© ë° ì •ì‚° (2ì¼)

#### Step 6: ìºì‹œë°± ì¡°íšŒ UI
```html
<!-- /my-cashback.html (ìƒˆ í˜ì´ì§€) -->
<div class="cashback-dashboard">
  <div class="cashback-summary">
    <h2>ğŸ’° ë‚´ ìºì‹œë°±</h2>
    <div class="balance">
      <span class="amount" id="total-cashback">0</span>ì›
    </div>
    <p>ì‚¬ìš© ê°€ëŠ¥: <span id="available-cashback">0</span>ì›</p>
    <p>ì‚¬ìš© ì™„ë£Œ: <span id="used-cashback">0</span>ì›</p>
  </div>

  <div class="referral-stats">
    <h3>ğŸ“Š ì´ˆëŒ€ í˜„í™©</h3>
    <p>ì´ ì´ˆëŒ€ ìˆ˜: <span id="total-invites">0</span>ëª…</p>
    <p>êµ¬ë§¤ ì™„ë£Œ: <span id="conversions">0</span>ëª…</p>
    <p>ì „í™˜ìœ¨: <span id="conversion-rate">0</span>%</p>
  </div>

  <div class="cashback-history">
    <h3>ğŸ“œ ìºì‹œë°± ë‚´ì—­</h3>
    <table id="cashback-table">
      <thead>
        <tr>
          <th>ë‚ ì§œ</th>
          <th>ìœ í˜•</th>
          <th>ê¸ˆì•¡</th>
          <th>ìƒíƒœ</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>

<script>
// ìºì‹œë°± ë°ì´í„° ë¡œë“œ
async function loadCashbackData() {
  const userId = firebase.auth().currentUser?.uid;

  // 1. ìºì‹œë°± ë‚´ì—­ ê°€ì ¸ì˜¤ê¸°
  const cashbacksSnapshot = await db.collection('cashbacks')
    .where('userId', '==', userId)
    .orderBy('earnedAt', 'desc')
    .get();

  let totalCashback = 0;
  let availableCashback = 0;
  let usedCashback = 0;

  cashbacksSnapshot.forEach(doc => {
    const cashback = doc.data();
    totalCashback += cashback.amount;
    if (cashback.status === 'active') {
      availableCashback += cashback.remainingAmount;
    } else if (cashback.status === 'used') {
      usedCashback += cashback.amount;
    }
  });

  // UI ì—…ë°ì´íŠ¸
  document.getElementById('total-cashback').textContent = totalCashback.toLocaleString();
  document.getElementById('available-cashback').textContent = availableCashback.toLocaleString();
  document.getElementById('used-cashback').textContent = usedCashback.toLocaleString();

  // 2. ì´ˆëŒ€ í†µê³„ ê°€ì ¸ì˜¤ê¸°
  const referralsSnapshot = await db.collection('referrals')
    .where('referrerId', '==', userId)
    .get();

  let totalInvites = 0;
  let conversions = 0;

  referralsSnapshot.forEach(doc => {
    const referral = doc.data();
    totalInvites += referral.clicks;
    conversions += referral.conversions;
  });

  document.getElementById('total-invites').textContent = totalInvites;
  document.getElementById('conversions').textContent = conversions;
  document.getElementById('conversion-rate').textContent =
    totalInvites > 0 ? ((conversions / totalInvites) * 100).toFixed(1) : 0;
}
</script>
```

#### Step 7: ìºì‹œë°± ì‚¬ìš© ë¡œì§
```javascript
// ì£¼ë¬¸ ì‹œ ìºì‹œë°± ì‚¬ìš©
async function applyCashback(userId, orderAmount) {
  // 1. ì‚¬ìš© ê°€ëŠ¥í•œ ìºì‹œë°± ì¡°íšŒ
  const cashbacksSnapshot = await db.collection('cashbacks')
    .where('userId', '==', userId)
    .where('status', '==', 'active')
    .orderBy('earnedAt', 'asc') // ì˜¤ë˜ëœ ê²ƒë¶€í„° ì‚¬ìš©
    .get();

  let remainingAmount = orderAmount;
  const usedCashbacks = [];

  // 2. ìºì‹œë°± ì°¨ê° (FIFO)
  for (const doc of cashbacksSnapshot.docs) {
    if (remainingAmount <= 0) break;

    const cashback = doc.data();
    const useAmount = Math.min(cashback.remainingAmount, remainingAmount);

    // ìºì‹œë°± ì°¨ê°
    const newRemainingAmount = cashback.remainingAmount - useAmount;
    await doc.ref.update({
      remainingAmount: newRemainingAmount,
      usedAmount: firebase.firestore.FieldValue.increment(useAmount),
      status: newRemainingAmount === 0 ? 'used' : 'active',
      usedAt: new Date()
    });

    usedCashbacks.push({
      cashbackId: doc.id,
      useAmount: useAmount
    });

    remainingAmount -= useAmount;
  }

  return {
    totalUsed: orderAmount - remainingAmount,
    usedCashbacks: usedCashbacks
  };
}
```

---

## ì¹´í˜24 ì—°ë™ ë°©ì•ˆ

### ì˜µì…˜ 1: ì£¼ë¬¸ ë©”ëª¨ ë°©ì‹ (ê°„ë‹¨)
**ì¹´í˜24 ì„¤ì •:** ì—†ìŒ
**ì‚¬ìš©ì ì•¡ì…˜:** ìˆ˜ë™ ì…ë ¥ í•„ìš”

```javascript
// êµ¬ë§¤ìê°€ ì£¼ë¬¸ ì‹œ "ìš”ì²­ì‚¬í•­"ì— ë ˆí¼ëŸ´ ì½”ë“œ ì…ë ¥
// ì˜ˆ: "ABC123XY"

// ì£¼ë¬¸ ë™ê¸°í™” ì‹œ ë©”ëª¨ì—ì„œ ì¶”ì¶œ
function extractReferralCodeFromMemo(memo) {
  if (!memo) return null;
  const match = memo.match(/[A-Z0-9]{8}/i);
  return match ? match[0].toUpperCase() : null;
}
```

---

### ì˜µì…˜ 2: ì‚¬ìš©ì ì •ì˜ í•„ë“œ ë°©ì‹ (ê¶Œì¥)
**ì¹´í˜24 ì„¤ì •:** í•„ìš”
**ì‚¬ìš©ì ì•¡ì…˜:** ìë™

#### ì¹´í˜24 ì„¤ì • ë‹¨ê³„
1. **ì¹´í˜24 ê´€ë¦¬ì > ì‡¼í•‘ëª° ì„¤ì • > ì£¼ë¬¸ ì„¤ì •**
2. **"ì£¼ë¬¸ì„œ ì‚¬ìš©ì ì •ì˜ í•„ë“œ" ì¶”ê°€**
   - í•„ë“œëª…: `referral_code`
   - í•„ë“œ ìœ í˜•: í…ìŠ¤íŠ¸
   - ìµœëŒ€ ê¸¸ì´: 20ì
   - í•„ìˆ˜ ì…ë ¥: ì•„ë‹ˆì˜¤
   - ë…¸ì¶œ ìœ„ì¹˜: ì£¼ë¬¸ì„œ ìƒë‹¨

3. **API ì„¤ì •ì—ì„œ ì¶”ê°€ í•„ë“œ í™œì„±í™”**

```javascript
// ì¹´í˜24 API í˜¸ì¶œ ì‹œ embed íŒŒë¼ë¯¸í„°ì— ì¶”ê°€
const apiEndpoint = `/api/v2/admin/orders?embed=items,additional_information&start_date=${startDateStr}`;

// ì‘ë‹µ ì˜ˆì‹œ
{
  "order_id": "20260112-0001234",
  "additional_information": {
    "referral_code": "ABC123XY"  // â† ì‚¬ìš©ì ì •ì˜ í•„ë“œ
  }
}
```

---

### ì˜µì…˜ 3: Webhook ë°©ì‹ (ì‹¤ì‹œê°„)
**ì¹´í˜24 ì„¤ì •:** í•„ìš” (ê°œë°œì ì•± ë“±ë¡)
**ì‚¬ìš©ì ì•¡ì…˜:** ìë™

#### Cloud Functionìœ¼ë¡œ Webhook ì—”ë“œí¬ì¸íŠ¸ ìƒì„±

```javascript
// /functions/index.jsì— ì¶”ê°€
const functions = require('firebase-functions');
const admin = require('firebase-admin');
admin.initializeApp();

exports.cafe24OrderWebhook = functions.https.onRequest(async (req, res) => {
  try {
    // ì¹´í˜24ì—ì„œ ì£¼ë¬¸ ìƒì„± ì‹œ ìë™ í˜¸ì¶œ
    const { order_id, member_id, product_no, additional_information } = req.body;

    const referralCode = additional_information?.referral_code;

    if (referralCode) {
      // Firestoreì— ì¦‰ì‹œ ì €ì¥
      await admin.firestore().collection('cafe24_orders').doc(order_id).set({
        order_id,
        member_id,
        product_no,
        referralCode,
        isReferralPurchase: true,
        cashbackProcessed: false,
        receivedAt: new Date()
      }, { merge: true });

      console.log(`âœ… Webhook ìˆ˜ì‹ : ${order_id}, ë ˆí¼ëŸ´: ${referralCode}`);
    }

    res.status(200).send('OK');
  } catch (err) {
    console.error('Webhook ì˜¤ë¥˜:', err);
    res.status(500).send('Error');
  }
});
```

#### ì¹´í˜24 Webhook ì„¤ì •
1. **ì¹´í˜24 ê°œë°œìì„¼í„°** (https://developers.cafe24.com/)
2. **ì•± ë“±ë¡ â†’ Webhook URL ë“±ë¡**
   - Webhook URL: `https://us-central1-moyeora-deal-manager.cloudfunctions.net/cafe24OrderWebhook`
   - ì´ë²¤íŠ¸: `ì£¼ë¬¸ ìƒì„± (order.created)`

---

## ë³´ì•ˆ ë° ê²€ì¦

### 1. ë ˆí¼ëŸ´ ì½”ë“œ ì¤‘ë³µ ë°©ì§€
```javascript
async function generateUniqueReferralCode(userId, dealId) {
  let code;
  let attempts = 0;
  const maxAttempts = 5;

  while (attempts < maxAttempts) {
    code = Math.random().toString(36).substring(2, 10).toUpperCase();

    // ì¤‘ë³µ í™•ì¸
    const existing = await db.collection('referrals').doc(code).get();
    if (!existing.exists) {
      return code; // ê³ ìœ í•œ ì½”ë“œ ë°œê²¬
    }

    attempts++;
  }

  throw new Error('ë ˆí¼ëŸ´ ì½”ë“œ ìƒì„± ì‹¤íŒ¨');
}
```

### 2. ìê¸° ìì‹  êµ¬ë§¤ ë°©ì§€
```javascript
async function validateReferralPurchase(referralCode, purchaserId) {
  const referralDoc = await db.collection('referrals').doc(referralCode).get();
  const referral = referralDoc.data();

  // ì¶”ì²œì¸ê³¼ êµ¬ë§¤ìê°€ ê°™ìœ¼ë©´ ì°¨ë‹¨
  if (referral.referrerId === purchaserId) {
    console.error('âŒ ìê¸° ìì‹ ì€ ì¶”ì²œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
    return false;
  }

  return true;
}
```

### 3. ì¤‘ë³µ êµ¬ë§¤ ë°©ì§€ (1ì¸ 1íšŒ ì œí•œ)
```javascript
async function checkDuplicateReferralPurchase(referralCode, purchaserId) {
  const existingCashback = await db.collection('cashbacks')
    .where('referralCode', '==', referralCode)
    .where('userId', '==', purchaserId)
    .where('userType', '==', 'referee')
    .limit(1)
    .get();

  if (!existingCashback.empty) {
    console.error('âŒ ì´ë¯¸ ìºì‹œë°±ì„ ë°›ì•˜ìŠµë‹ˆë‹¤');
    return false; // ì¤‘ë³µ êµ¬ë§¤
  }

  return true;
}
```

### 4. ë ˆí¼ëŸ´ ì½”ë“œ ë§Œë£Œ ì²˜ë¦¬
```javascript
// ë§¤ì¼ ìë™ ì‹¤í–‰ (Cloud Function Scheduled)
exports.expireOldReferrals = functions.pubsub.schedule('every 24 hours').onRun(async () => {
  const now = new Date();

  const expiredReferrals = await admin.firestore().collection('referrals')
    .where('status', '==', 'active')
    .where('expiresAt', '<', now)
    .get();

  const batch = admin.firestore().batch();
  expiredReferrals.forEach(doc => {
    batch.update(doc.ref, { status: 'expired' });
  });

  await batch.commit();
  console.log(`âœ… ${expiredReferrals.size}ê°œ ë ˆí¼ëŸ´ ë§Œë£Œ ì²˜ë¦¬ ì™„ë£Œ`);
});
```

---

## ì¶”ê°€ ê³ ë ¤ì‚¬í•­

### 1. ì¹´í˜24 íšŒì› ID â†” Firebase UID ë§¤í•‘
```javascript
// ì¹´í˜24 íšŒì› IDì™€ Firebase UID ì—°ê²° í…Œì´ë¸” í•„ìš”
// Firestore ì»¬ë ‰ì…˜: user_mappings
{
  cafe24MemberId: "moyeora123",
  firebaseUid: "user_kakao_12345",
  email: "moyeora@example.com",
  createdAt: Timestamp
}

// ë§¤í•‘ í•¨ìˆ˜
async function getFirebaseUidFromCafe24Member(memberId) {
  const mappingDoc = await db.collection('user_mappings')
    .where('cafe24MemberId', '==', memberId)
    .limit(1)
    .get();

  if (mappingDoc.empty) {
    console.error('âŒ íšŒì› ë§¤í•‘ ì •ë³´ ì—†ìŒ:', memberId);
    return null;
  }

  return mappingDoc.docs[0].data().firebaseUid;
}
```

### 2. ë ˆí¼ëŸ´ í†µê³„ ëŒ€ì‹œë³´ë“œ
```javascript
// admin/index.htmlì— ë ˆí¼ëŸ´ ë¶„ì„ ë©”ë‰´ ì¶”ê°€
async function renderReferralAnalytics() {
  const referralsSnapshot = await db.collection('referrals').get();

  let totalClicks = 0;
  let totalConversions = 0;
  let totalCashback = 0;

  referralsSnapshot.forEach(doc => {
    const data = doc.data();
    totalClicks += data.clicks || 0;
    totalConversions += data.conversions || 0;
    totalCashback += data.totalCashback || 0;
  });

  const conversionRate = totalClicks > 0 ? (totalConversions / totalClicks * 100).toFixed(2) : 0;

  console.log(`
    ğŸ“Š ë ˆí¼ëŸ´ í†µê³„
    â”œâ”€ ì´ í´ë¦­: ${totalClicks}
    â”œâ”€ ì´ êµ¬ë§¤: ${totalConversions}
    â”œâ”€ ì „í™˜ìœ¨: ${conversionRate}%
    â””â”€ ì´ ìºì‹œë°±: ${totalCashback.toLocaleString()}ì›
  `);
}
```

### 3. í‘¸ì‹œ ì•Œë¦¼ (ì„ íƒ)
```javascript
// Cloud Messagingìœ¼ë¡œ ìºì‹œë°± ì ë¦½ ì•Œë¦¼
async function sendCashbackNotification(userId, amount) {
  const userDoc = await db.collection('users').doc(userId).get();
  const fcmToken = userDoc.data()?.fcmToken;

  if (fcmToken) {
    await admin.messaging().send({
      token: fcmToken,
      notification: {
        title: 'ğŸ ìºì‹œë°± ì ë¦½ ì™„ë£Œ!',
        body: `${amount.toLocaleString()}ì›ì´ ì ë¦½ë˜ì—ˆìŠµë‹ˆë‹¤.`
      },
      data: {
        type: 'cashback',
        amount: amount.toString()
      }
    });
  }
}
```

---

## ì˜ˆìƒ ë¹„ìš© ë° ROI

### ê°œë°œ ë¹„ìš©
- Phase 1 (ê¸°ë³¸ ë ˆí¼ëŸ´): 1-2ì¼
- Phase 2 (ì¹´í˜24 ì—°ë™): 2-3ì¼
- Phase 3 (ìºì‹œë°± ì‚¬ìš©): 2ì¼
- **ì´ ê°œë°œ ê¸°ê°„: 5-7ì¼**

### ìš´ì˜ ë¹„ìš©
- Firebase Firestore: ë¬´ë£Œ í• ë‹¹ëŸ‰ ë‚´ (ì›” 50,000 read, 20,000 write)
- Cloud Functions: ë¬´ë£Œ í• ë‹¹ëŸ‰ ë‚´ (ì›” 200ë§Œ í˜¸ì¶œ)
- ìºì‹œë°± ì§€ê¸‰: ì£¼ë¬¸ë‹¹ í‰ê·  8,000ì› (ì¶”ì²œì¸ 5,000ì› + í”¼ì¶”ì²œì¸ 3,000ì›)

### ì˜ˆìƒ íš¨ê³¼
- **ë°”ì´ëŸ´ ê³„ìˆ˜ (K-factor)**: 0.3 ~ 0.5
- **ì „í™˜ìœ¨ ì¦ê°€**: 15~25%
- **ê³ ê° íšë“ ë¹„ìš© (CAC) ì ˆê°**: 30~40%

---

## ë‹¤ìŒ ë‹¨ê³„

1. âœ… **êµ¬í˜„ ë°©ì‹ ê²°ì •**
   - ì˜µì…˜ 1: ì£¼ë¬¸ ë©”ëª¨ (ë¹ ë¥¸ í”„ë¡œí† íƒ€ì…)
   - âœ¨ **ì˜µì…˜ 2: ì‚¬ìš©ì ì •ì˜ í•„ë“œ (ê¶Œì¥)**
   - ì˜µì…˜ 3: Webhook (ì‹¤ì‹œê°„)

2. âœ… **ì¹´í˜24 ì„¤ì •**
   - ì‚¬ìš©ì ì •ì˜ í•„ë“œ ì¶”ê°€
   - API ê¶Œí•œ í™•ì¸

3. âœ… **Firestore ì»¬ë ‰ì…˜ ìƒì„±**
   - `referrals`
   - `cashbacks`
   - `user_mappings`

4. âœ… **UI ê°œë°œ**
   - ê³µìœ  ë²„íŠ¼
   - ìºì‹œë°± ëŒ€ì‹œë³´ë“œ

5. âœ… **í…ŒìŠ¤íŠ¸**
   - ë ˆí¼ëŸ´ ë§í¬ ìƒì„±
   - ì£¼ë¬¸ ë™ê¸°í™”
   - ìºì‹œë°± ì ë¦½

6. âœ… **ë°°í¬ ë° ëª¨ë‹ˆí„°ë§**

---

## ê²°ë¡ 

âœ… **êµ¬í˜„ ê°€ëŠ¥í•©ë‹ˆë‹¤!**

í˜„ì¬ ì‹œìŠ¤í…œ(Firebase + ì¹´í˜24 ì—°ë™)ì„ í™œìš©í•˜ë©´ ë ˆí¼ëŸ´ ìºì‹œë°± ì‹œìŠ¤í…œì„ **5-7ì¼ ë‚´ì— êµ¬í˜„** ê°€ëŠ¥í•©ë‹ˆë‹¤.

**ê¶Œì¥ ë°©ì‹:** ì˜µì…˜ 2 (ì‚¬ìš©ì ì •ì˜ í•„ë“œ + ì¿ í‚¤)
- ìë™ ì¶”ì ìœ¼ë¡œ ë†’ì€ ì „í™˜ìœ¨
- ì¹´í˜24 ê¸°ë³¸ ê¸°ëŠ¥ í™œìš©
- í™•ì¥ì„± ìš°ìˆ˜

**í•µì‹¬ ê¸°ìˆ :**
- Firebase Firestore (ë ˆí¼ëŸ´ ë°ì´í„° ì €ì¥)
- ì¹´í˜24 OAuth API (ì£¼ë¬¸ ë™ê¸°í™”)
- JavaScript ì¿ í‚¤ (ì¶”ì )
- Cloud Functions (ìë™ ì²˜ë¦¬)

ì§ˆë¬¸ì´ë‚˜ ì¶”ê°€ ë…¼ì˜ê°€ í•„ìš”í•˜ì‹œë©´ ë§ì”€í•´ì£¼ì„¸ìš”! ğŸš€
