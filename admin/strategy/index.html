<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì „ëµì„¼í„° - ëª¨ì—¬ë¼ë”œ</title>
  <link rel="manifest" href="/admin/manifest.json">
  <meta name="theme-color" content="#3182f6">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="ì „ëµì„¼í„°">
  <link rel="apple-touch-icon" href="/admin/icon-192.png">
  <meta name="description" content="ëª¨ì—¬ë¼ë”œ ì „ëµì„¼í„° - ì˜ì—…í˜„í™©, OKR, ì „ëµê¸°íš">
  <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
  <style>
    :root {
      --primary: #3182f6;
      --primary-light: #eef4ff;
      --primary-dark: #1b64da;
      --white: #ffffff;
      --gray-900: #191f28;
      --gray-800: #333d4b;
      --gray-700: #4e5968;
      --gray-600: #6b7684;
      --gray-500: #8b95a1;
      --gray-400: #b0b8c1;
      --gray-300: #d1d6db;
      --gray-200: #e5e8eb;
      --gray-100: #f2f4f6;
      --gray-50: #f9fafb;
      --success: #00c073;
      --success-light: #e8f7f0;
      --warning: #fc9600;
      --warning-light: #fff8f0;
      --danger: #f04452;
      --danger-light: #fff0f1;
      --info: #3182f6;
      --info-light: #eef4ff;
      --card-radius: 16px;
      --card-shadow: 0 2px 8px rgba(0,0,0,0.06);
      --btn-radius: 8px;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      min-height: 100vh;
      background: var(--gray-100);
      font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
      color: var(--gray-900);
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
    }

    /* ë¡œê·¸ì¸ í™”ë©´ */
    .login-screen {
      min-height: 100vh;
      background: var(--gray-100);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .login-container { width: 100%; max-width: 400px; }

    .login-logo {
      text-align: center;
      margin-bottom: 32px;
    }

    .login-logo img { height: 48px; }

    .login-logo-desc {
      font-size: 14px;
      color: var(--gray-500);
      margin-top: 8px;
    }

    .login-card {
      background: var(--white);
      border-radius: 16px;
      padding: 32px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.04);
    }

    .login-title {
      font-size: 18px;
      font-weight: 700;
      text-align: center;
      margin-bottom: 24px;
      color: var(--gray-900);
    }

    .login-error {
      background: var(--danger-light);
      border: 1px solid #fecaca;
      color: var(--danger);
      padding: 12px 16px;
      border-radius: 8px;
      font-size: 14px;
      margin-bottom: 20px;
      display: none;
    }

    .login-error.show { display: block; }

    .login-input {
      width: 100%;
      padding: 12px 14px;
      border: 1px solid var(--gray-300);
      border-radius: 8px;
      font-size: 15px;
      font-family: inherit;
      transition: all 0.15s ease;
      background: var(--white);
      margin-bottom: 12px;
    }

    .login-input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px var(--primary-light);
    }

    .login-btn {
      width: 100%;
      padding: 14px;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      background: var(--primary);
      color: var(--white);
      font-family: inherit;
      transition: all 0.15s ease;
    }

    .login-btn:hover { background: var(--primary-dark); }

    /* ë ˆì´ì•„ì›ƒ */
    .app-container {
      display: flex;
      min-height: 100vh;
    }

    /* ì‚¬ì´ë“œë°” */
    .sidebar {
      width: 260px;
      background: var(--white);
      border-right: 1px solid var(--gray-200);
      padding: 24px 0;
      position: fixed;
      height: 100vh;
      overflow-y: auto;
      z-index: 100;
      transition: transform 0.3s ease;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 8px 20px;
      margin-bottom: 32px;
    }

    .logo-icon {
      width: 36px;
      height: 36px;
      background: var(--primary);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
    }

    .logo-text {
      font-size: 18px;
      font-weight: 700;
      color: var(--gray-900);
    }

    .nav-section { margin-bottom: 32px; }

    .nav-label {
      font-size: 12px;
      font-weight: 700;
      color: var(--gray-500);
      letter-spacing: -0.2px;
      padding: 0 20px;
      margin-bottom: 12px;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px 20px;
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 15px;
      font-weight: 500;
      color: var(--gray-700);
      position: relative;
    }

    .nav-item:hover {
      background: var(--gray-50);
      color: var(--gray-900);
    }

    .nav-item.active {
      background: var(--primary-light);
      color: var(--primary);
      font-weight: 600;
    }

    .nav-item.active::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 3px;
      background: var(--primary);
    }

    .nav-item .icon {
      width: 20px;
      text-align: center;
      font-size: 16px;
    }

    .center-links {
      padding: 16px 20px;
      border-top: 1px solid var(--gray-200);
      margin-top: auto;
    }

    .center-link {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 12px;
      border-radius: 8px;
      font-size: 13px;
      color: var(--gray-600);
      text-decoration: none;
      transition: all 0.2s;
      margin-bottom: 4px;
    }

    .center-link:hover {
      background: var(--gray-100);
      color: var(--gray-900);
    }

    .center-link.active {
      background: var(--primary-light);
      color: var(--primary);
      font-weight: 600;
    }

    /* ë©”ì¸ ì»¨í…ì¸  */
    .main-content {
      flex: 1;
      margin-left: 260px;
      padding: 28px 32px;
      max-width: 1400px;
    }

    /* ëª¨ë°”ì¼ ë©”ë‰´ */
    .mobile-menu-btn {
      display: none;
      position: fixed;
      top: 16px;
      left: 16px;
      z-index: 150;
      background: var(--primary);
      color: var(--white);
      border: none;
      width: 44px;
      height: 44px;
      border-radius: 10px;
      cursor: pointer;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }

    .sidebar-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 90;
    }

    /* í—¤ë” */
    .page-header { margin-bottom: 24px; }

    .page-title {
      font-size: 22px;
      font-weight: 700;
      color: var(--gray-900);
      margin-bottom: 4px;
    }

    .page-desc {
      font-size: 14px;
      color: var(--gray-500);
    }

    /* ë²„íŠ¼ */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      padding: 10px 16px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      border: none;
      cursor: pointer;
      transition: all 0.15s ease;
      font-family: inherit;
    }

    .btn-primary {
      background: var(--primary);
      color: var(--white);
    }

    .btn-primary:hover { background: var(--primary-dark); }

    .btn-secondary {
      background: var(--white);
      color: var(--gray-700);
      border: 1px solid var(--gray-300);
    }

    .btn-secondary:hover { background: var(--gray-50); }

    /* ì¹´ë“œ */
    .card {
      background: var(--white);
      border-radius: var(--card-radius);
      box-shadow: var(--card-shadow);
      padding: 24px;
      margin-bottom: 20px;
    }

    .card-title {
      font-size: 16px;
      font-weight: 700;
      color: var(--gray-900);
      margin-bottom: 16px;
    }

    /* KPI ì¹´ë“œ */
    .kpi-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-bottom: 24px;
    }

    .kpi-card {
      background: var(--white);
      border-radius: var(--card-radius);
      padding: 20px;
      box-shadow: var(--card-shadow);
    }

    .kpi-card.highlight {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
    }

    .kpi-label {
      font-size: 13px;
      color: var(--gray-500);
      margin-bottom: 8px;
    }

    .kpi-card.highlight .kpi-label {
      color: rgba(255,255,255,0.8);
    }

    .kpi-value {
      font-size: 28px;
      font-weight: 700;
      color: var(--gray-900);
    }

    .kpi-card.highlight .kpi-value {
      color: white;
    }

    .kpi-change {
      font-size: 12px;
      margin-top: 4px;
    }

    .kpi-change.positive { color: var(--success); }
    .kpi-change.negative { color: var(--danger); }

    /* í…Œì´ë¸” */
    .table-wrapper {
      overflow-x: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th, td {
      padding: 12px 16px;
      text-align: left;
      border-bottom: 1px solid var(--gray-200);
    }

    th {
      font-size: 13px;
      font-weight: 600;
      color: var(--gray-500);
      background: var(--gray-50);
    }

    td {
      font-size: 14px;
      color: var(--gray-700);
    }

    /* ì°¨íŠ¸ í”Œë ˆì´ìŠ¤í™€ë” */
    .chart-placeholder {
      height: 300px;
      background: var(--gray-50);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--gray-500);
      font-size: 14px;
    }

    /* OKR ìŠ¤íƒ€ì¼ */
    .okr-section {
      margin-bottom: 24px;
    }

    .okr-objective {
      background: var(--white);
      border-radius: var(--card-radius);
      padding: 20px;
      margin-bottom: 16px;
      box-shadow: var(--card-shadow);
    }

    .okr-objective-title {
      font-size: 16px;
      font-weight: 700;
      color: var(--gray-900);
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .okr-key-result {
      background: var(--gray-50);
      border-radius: 8px;
      padding: 12px 16px;
      margin-bottom: 8px;
    }

    .okr-kr-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .okr-kr-title {
      font-size: 14px;
      color: var(--gray-700);
    }

    .okr-kr-progress {
      font-size: 14px;
      font-weight: 600;
      color: var(--primary);
    }

    .okr-progress-bar {
      height: 6px;
      background: var(--gray-200);
      border-radius: 3px;
      overflow: hidden;
    }

    .okr-progress-fill {
      height: 100%;
      background: var(--primary);
      border-radius: 3px;
      transition: width 0.3s ease;
    }

    /* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */
    .tab-nav {
      display: flex;
      gap: 4px;
      background: var(--gray-100);
      padding: 4px;
      border-radius: 10px;
      margin-bottom: 24px;
    }

    .tab-btn {
      flex: 1;
      padding: 10px 16px;
      border: none;
      background: transparent;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      color: var(--gray-600);
      cursor: pointer;
      transition: all 0.2s;
    }

    .tab-btn.active {
      background: var(--white);
      color: var(--gray-900);
      font-weight: 600;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* í† ìŠ¤íŠ¸ */
    #toast {
      position: fixed;
      bottom: 24px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--gray-900);
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 14px;
      display: none;
      z-index: 9999;
    }

    /* ë°˜ì‘í˜• */
    @media (max-width: 768px) {
      .sidebar {
        transform: translateX(-100%);
      }

      .sidebar.open {
        transform: translateX(0);
      }

      .mobile-menu-btn {
        display: flex;
      }

      .sidebar-overlay.show {
        display: block;
      }

      .main-content {
        margin-left: 0;
        padding: 70px 16px 24px;
      }

      .kpi-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
  </style>
</head>
<body>
  <!-- ë¡œê·¸ì¸ í™”ë©´ -->
  <div id="loginScreen" class="login-screen">
    <div class="login-container">
      <div class="login-logo">
        <img src="/admin/moyeora-logo.png" alt="ëª¨ì—¬ë¼ë”œ" onerror="this.style.display='none'">
        <div class="login-logo-desc">ì „ëµì„¼í„°</div>
      </div>
      <div class="login-card">
        <div class="login-title">ê´€ë¦¬ì ë¡œê·¸ì¸</div>
        <div id="loginError" class="login-error"></div>
        <input type="password" id="loginPassword" class="login-input" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥" onkeypress="if(event.key==='Enter')handleLogin()">
        <button class="login-btn" onclick="handleLogin()">ë¡œê·¸ì¸</button>
      </div>
    </div>
  </div>

  <!-- ì•± í™”ë©´ -->
  <div id="appScreen" class="app-container" style="display:none;">
    <!-- ëª¨ë°”ì¼ ë©”ë‰´ ë²„íŠ¼ -->
    <button class="mobile-menu-btn" onclick="toggleSidebar()">â˜°</button>
    <div class="sidebar-overlay" onclick="toggleSidebar()"></div>

    <!-- ì‚¬ì´ë“œë°” -->
    <aside class="sidebar">
      <div class="logo">
        <div class="logo-icon">ğŸ“Š</div>
        <span class="logo-text">ì „ëµì„¼í„°</span>
      </div>

      <nav>
        <div class="nav-section">
          <div class="nav-label">ì „ëµ ê´€ë¦¬</div>
          <div class="nav-item active" onclick="switchTab('dashboard')">
            <span class="icon">ğŸ“ˆ</span>
            <span>ì˜ì—…í˜„í™©</span>
          </div>
          <div class="nav-item" onclick="switchTab('okr')">
            <span class="icon">ğŸ¯</span>
            <span>OKR</span>
          </div>
          <div class="nav-item" onclick="switchTab('planning')">
            <span class="icon">ğŸ“‹</span>
            <span>ì „ëµê¸°íš</span>
          </div>
          <div class="nav-item" onclick="switchTab('growth')">
            <span class="icon">ğŸš€</span>
            <span>ê·¸ë¡œìŠ¤ë³´ë“œ</span>
          </div>
          <div class="nav-item" onclick="switchTab('guide')">
            <span class="icon">ğŸ“š</span>
            <span>ì—…ë¬´ê°€ì´ë“œ</span>
          </div>
        </div>

        <!-- ì„¼í„° ì´ë™ -->
        <div class="center-links">
          <div class="nav-label">ì„¼í„° ì´ë™</div>
          <a href="/admin/" class="center-link">
            <span>âš™ï¸</span>
            <span>ìš´ì˜ì„¼í„°</span>
          </a>
          <a href="/admin/crm/" class="center-link">
            <span>ğŸ’¼</span>
            <span>CRMì„¼í„°</span>
          </a>
          <a href="/admin/strategy/" class="center-link active">
            <span>ğŸ“Š</span>
            <span>ì „ëµì„¼í„°</span>
          </a>
        </div>
      </nav>
    </aside>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <main class="main-content">
      <!-- ì˜ì—…í˜„í™© -->
      <div id="tab-dashboard" class="tab-content active">
        <div class="page-header">
          <h1 class="page-title">ì˜ì—…í˜„í™©</h1>
          <p class="page-desc">ì‹¤ì‹œê°„ ì˜ì—… ì„±ê³¼ ëª¨ë‹ˆí„°ë§</p>
        </div>

        <div class="kpi-grid">
          <div class="kpi-card highlight">
            <div class="kpi-label">ì´ë²ˆ ë‹¬ ë§¤ì¶œ</div>
            <div class="kpi-value" id="monthlyRevenue">-</div>
            <div class="kpi-change positive" id="revenueChange">ê³„ì‚° ì¤‘...</div>
          </div>
          <div class="kpi-card">
            <div class="kpi-label">ì§„í–‰ì¤‘ ê³µêµ¬</div>
            <div class="kpi-value" id="activeDeals">-</div>
          </div>
          <div class="kpi-card">
            <div class="kpi-label">í˜‘ì˜ì¤‘ ê³µêµ¬</div>
            <div class="kpi-value" id="negotiatingDeals">-</div>
          </div>
          <div class="kpi-card">
            <div class="kpi-label">ë“±ë¡ ê³µê¸‰ì‚¬</div>
            <div class="kpi-value" id="totalSuppliers">-</div>
          </div>
        </div>

        <div class="card">
          <div class="card-title">ì›”ë³„ ë§¤ì¶œ ì¶”ì´</div>
          <div class="chart-placeholder" id="revenueChart">
            ì°¨íŠ¸ ë°ì´í„° ë¡œë”© ì¤‘...
          </div>
        </div>

        <div class="card">
          <div class="card-title">ìµœê·¼ ì™„ë£Œ ê³µêµ¬</div>
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>ìƒí’ˆëª…</th>
                  <th>ê³µê¸‰ì‚¬</th>
                  <th>ë§¤ì¶œ</th>
                  <th>ê¸°ê°„</th>
                </tr>
              </thead>
              <tbody id="recentDealsTable">
                <tr><td colspan="4" style="text-align:center;color:var(--gray-500)">ë°ì´í„° ë¡œë”© ì¤‘...</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- OKR -->
      <div id="tab-okr" class="tab-content">
        <div class="page-header">
          <h1 class="page-title">OKR</h1>
          <p class="page-desc">ëª©í‘œ ë° í•µì‹¬ ê²°ê³¼ ê´€ë¦¬</p>
        </div>

        <div class="tab-nav">
          <button class="tab-btn active" onclick="switchOkrPeriod('quarterly')">ë¶„ê¸°ë³„</button>
          <button class="tab-btn" onclick="switchOkrPeriod('monthly')">ì›”ë³„</button>
          <button class="tab-btn" onclick="switchOkrPeriod('weekly')">ì£¼ê°„</button>
        </div>

        <div class="okr-section" id="okrContent">
          <div class="okr-objective">
            <div class="okr-objective-title">
              <span>ğŸ¯</span>
              <span>Q1 ë§¤ì¶œ ëª©í‘œ ë‹¬ì„±</span>
            </div>
            <div class="okr-key-result">
              <div class="okr-kr-header">
                <span class="okr-kr-title">ì›” ë§¤ì¶œ 1ì–µì› ë‹¬ì„±</span>
                <span class="okr-kr-progress">65%</span>
              </div>
              <div class="okr-progress-bar">
                <div class="okr-progress-fill" style="width: 65%"></div>
              </div>
            </div>
            <div class="okr-key-result">
              <div class="okr-kr-header">
                <span class="okr-kr-title">ì‹ ê·œ ê³µê¸‰ì‚¬ 20ê°œ í™•ë³´</span>
                <span class="okr-kr-progress">40%</span>
              </div>
              <div class="okr-progress-bar">
                <div class="okr-progress-fill" style="width: 40%"></div>
              </div>
            </div>
            <div class="okr-key-result">
              <div class="okr-kr-header">
                <span class="okr-kr-title">ê³µêµ¬ ì „í™˜ìœ¨ 15% ë‹¬ì„±</span>
                <span class="okr-kr-progress">80%</span>
              </div>
              <div class="okr-progress-bar">
                <div class="okr-progress-fill" style="width: 80%"></div>
              </div>
            </div>
          </div>

          <div class="okr-objective">
            <div class="okr-objective-title">
              <span>ğŸš€</span>
              <span>íŒŒíŠ¸ë„ˆ ìƒíƒœê³„ í™•ì¥</span>
            </div>
            <div class="okr-key-result">
              <div class="okr-kr-header">
                <span class="okr-kr-title">ì…€ëŸ¬ ë„¤íŠ¸ì›Œí¬ 50ê°œ í™•ë³´</span>
                <span class="okr-kr-progress">55%</span>
              </div>
              <div class="okr-progress-bar">
                <div class="okr-progress-fill" style="width: 55%"></div>
              </div>
            </div>
            <div class="okr-key-result">
              <div class="okr-kr-header">
                <span class="okr-kr-title">íŒŒíŠ¸ë„ˆ ë§Œì¡±ë„ 4.5ì  ì´ìƒ</span>
                <span class="okr-kr-progress">90%</span>
              </div>
              <div class="okr-progress-bar">
                <div class="okr-progress-fill" style="width: 90%"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ì „ëµê¸°íš -->
      <div id="tab-planning" class="tab-content">
        <div class="page-header">
          <h1 class="page-title">ì „ëµê¸°íš</h1>
          <p class="page-desc">PMF ê²€ì¦ ë‹¨ê³„ - ì—°ë„ë³„ ì „ëµ ë°°ë¶„ ë° ë„ë©”ì¸ ì „ëµ</p>
        </div>

        <!-- ì—°ë„ë³„ ëª©í‘œ ë° ê·¸ë¡œìŠ¤/ì˜ì—… ë°°ë¶„ -->
        <div id="yearlyGoalsSection" class="card" style="margin-bottom: 24px;">
          <div class="card-title">ì—°ë„ë³„ ì „ëµ ë°°ë¶„</div>
          <div id="yearlyGoalsGrid" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 24px;">
            <!-- ë™ì ìœ¼ë¡œ ë Œë”ë§ -->
          </div>
        </div>

        <!-- ê·¸ë¡œìŠ¤ vs ì˜ì—… ë¹„ìœ¨ -->
        <div id="growthSalesSection" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 24px;">
          <!-- ê·¸ë¡œìŠ¤ -->
          <div style="background: linear-gradient(135deg, #dcfce7, #bbf7d0); border-radius: 16px; padding: 24px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
              <div>
                <div style="font-size: 20px; font-weight: 700; color: #16a34a;">ğŸŒ± ê³ ê°/íŒ€ì› ì—¬ì • ê³ ë„í™”</div>
                <div style="font-size: 13px; color: #15803d; margin-top: 4px;">MVP ì™„ì„±, í”„ë¡œì„¸ìŠ¤ ìµœì í™”, UX ê°œì„ </div>
              </div>
              <div id="growthPercent" style="font-size: 36px; font-weight: 800; color: #16a34a;">90%</div>
            </div>
            <div style="background: white; border-radius: 10px; padding: 14px; margin-bottom: 12px;">
              <div style="font-size: 13px; font-weight: 600; color: #16a34a; margin-bottom: 10px;">ğŸ’¡ íŒ€ì› ì‹¤ì²œ ê°€ì´ë“œ</div>
              <ul style="margin: 0; padding-left: 18px; font-size: 13px; color: #15803d; line-height: 1.8;">
                <li>ê³µêµ¬ ì§„í–‰ ì¤‘ ë¶ˆí¸í•œ ì  ë°œê²¬ ì‹œ ì¦‰ì‹œ ê¸°ë¡</li>
                <li>ë°˜ë³µ ì‘ì—…ì€ ìë™í™” ê°€ëŠ¥í•œì§€ ê²€í† </li>
                <li>ì…€ëŸ¬/ê³µê¸‰ì‚¬ í”¼ë“œë°± ìˆ˜ì§‘ ë° ê³µìœ </li>
                <li>ì–´ë“œë¯¼ ì‚¬ìš©ì„± ê°œì„  ì•„ì´ë””ì–´ ì œì•ˆ</li>
              </ul>
            </div>
            <div style="background: white; border-radius: 10px; padding: 14px;">
              <div style="font-size: 12px; color: var(--gray-500); margin-bottom: 6px;">í˜„ì¬ ìƒíƒœ</div>
              <div style="display: flex; flex-wrap: wrap; gap: 6px;">
                <span style="font-size: 11px; padding: 4px 10px; background: #dcfce7; color: #16a34a; border-radius: 4px;">ğŸ“ˆ ë¸Œëœë“œ ì¸ì§€ë„</span>
                <span style="font-size: 11px; padding: 4px 10px; background: #dcfce7; color: #16a34a; border-radius: 4px;">ğŸ¬ ì½˜í…ì¸  í’ˆì§ˆ</span>
                <span style="font-size: 11px; padding: 4px 10px; background: #dcfce7; color: #16a34a; border-radius: 4px;">ğŸ”„ ì¬êµ¬ë§¤ìœ¨</span>
              </div>
            </div>
          </div>

          <!-- ì˜ì—…í™œë™ -->
          <div style="background: linear-gradient(135deg, #dbeafe, #bfdbfe); border-radius: 16px; padding: 24px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
              <div>
                <div style="font-size: 20px; font-weight: 700; color: #2563eb;">ğŸ’¼ ì˜ì—…í™œë™</div>
                <div style="font-size: 13px; color: #1d4ed8; margin-top: 4px;">ì…€ëŸ¬/ê³µê¸‰ì‚¬ í™•ë³´, ê³µêµ¬ ì§„í–‰, ì •ì‚° ê´€ë¦¬</div>
              </div>
              <div id="salesPercent" style="font-size: 36px; font-weight: 800; color: #2563eb;">10%</div>
            </div>
            <div style="background: white; border-radius: 10px; padding: 14px; margin-bottom: 12px;">
              <div style="font-size: 13px; font-weight: 600; color: #2563eb; margin-bottom: 10px;">ğŸ’¡ íŒ€ì› ì‹¤ì²œ ê°€ì´ë“œ</div>
              <ul style="margin: 0; padding-left: 18px; font-size: 13px; color: #1d4ed8; line-height: 1.8;">
                <li>ì£¼ NíšŒ ì‹ ê·œ ì…€ëŸ¬/ê³µê¸‰ì‚¬ ë°œêµ´ í™œë™</li>
                <li>ê¸°ì¡´ ì…€ëŸ¬ ì¬ì°¸ì—¬ ìœ ë„ ì—°ë½</li>
                <li>ê³µêµ¬ ì™„ë£Œ í›„ 7ì¼ ë‚´ ì •ì‚° ì²˜ë¦¬</li>
                <li>ê³µêµ¬ ì§„í–‰ ì¤‘ ë§¤ì¶œ í˜„í™© ì£¼ê°„ ì²´í¬</li>
              </ul>
            </div>
            <div style="background: white; border-radius: 10px; padding: 14px;">
              <div style="font-size: 12px; color: var(--gray-500); margin-bottom: 6px;">í˜„ì¬ ì‹¤ì </div>
              <div id="salesStats" style="display: flex; flex-wrap: wrap; gap: 6px;">
                <span style="font-size: 11px; padding: 4px 10px; background: #dbeafe; color: #2563eb; border-radius: 4px;">ğŸ‘¥ ì…€ëŸ¬ -ëª…</span>
                <span style="font-size: 11px; padding: 4px 10px; background: #dbeafe; color: #2563eb; border-radius: 4px;">ğŸ“¦ ê³µêµ¬ -ê±´</span>
              </div>
            </div>
          </div>
        </div>

        <!-- ì „ëµ 4ì¶• (ë„ë©”ì¸ë³„ ì „ëµ) -->
        <div class="card" style="margin-bottom: 24px;">
          <div class="card-title">ğŸ¯ ì „ëµ 4ì¶• (ë„ë©”ì¸ë³„ ì „ëµ)</div>
          <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px;">
            <!-- ì „ëµ1: êµ­ë‚´ ê³µê¸‰ì‚¬ -->
            <div style="background: var(--gray-50); border-radius: 12px; padding: 20px; border-left: 4px solid var(--primary);">
              <div style="font-size: 24px; font-weight: 800; color: var(--primary); margin-bottom: 8px;">â‘ </div>
              <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">êµ­ë‚´ ê³µê¸‰ì‚¬</div>
              <div style="font-size: 12px; color: var(--gray-500); margin-bottom: 12px;">ì•ˆì • ë² ì´ìŠ¤</div>
              <div id="domainSuppliers" style="font-size: 20px; font-weight: 700; color: var(--gray-900);">-ê°œ</div>
              <div style="font-size: 11px; color: var(--gray-500);">ìˆ˜ìˆ˜ë£Œ 10~30%</div>
            </div>

            <!-- ì „ëµ2: í•´ì™¸ ì§ì ‘ ìˆ˜ì… -->
            <div style="background: rgba(252, 150, 0, 0.08); border-radius: 12px; padding: 20px; border-left: 4px solid var(--primary);">
              <div style="font-size: 24px; font-weight: 800; color: var(--primary); margin-bottom: 8px;">â‘¡</div>
              <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">í•´ì™¸ ì§ì ‘ ìˆ˜ì… â˜…</div>
              <div style="font-size: 12px; color: var(--gray-500); margin-bottom: 12px;">ìˆœìµ ê·¹ëŒ€í™”</div>
              <div style="font-size: 20px; font-weight: 700; color: var(--gray-900);">ì¤€ë¹„ì¤‘</div>
              <div style="font-size: 11px; color: var(--primary);">ì¼ë³¸ ìš°ì„  ì§„í–‰</div>
            </div>

            <!-- ì „ëµ3: í•´ì™¸ ìˆ˜ì¶œ -->
            <div style="background: rgba(252, 150, 0, 0.08); border-radius: 12px; padding: 20px; border-left: 4px solid var(--primary);">
              <div style="font-size: 24px; font-weight: 800; color: var(--primary); margin-bottom: 8px;">â‘¢</div>
              <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">í•´ì™¸ ìˆ˜ì¶œ â˜…</div>
              <div style="font-size: 12px; color: var(--gray-500); margin-bottom: 12px;">K-ë¸Œëœë“œ í™•ì¥</div>
              <div style="font-size: 20px; font-weight: 700; color: var(--gray-900);">ì¤€ë¹„ì¤‘</div>
              <div style="font-size: 11px; color: var(--primary);">ê³ ë§ˆì§„ êµ¬ì¡°</div>
            </div>

            <!-- ì „ëµ4: ë‹¹ê·¼ë§ˆì¼“ -->
            <div style="background: var(--gray-50); border-radius: 12px; padding: 20px; border-left: 4px solid var(--gray-400);">
              <div style="font-size: 24px; font-weight: 800; color: var(--gray-400); margin-bottom: 8px;">â‘£</div>
              <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">ë‹¹ê·¼ Ã— ëª¨ì—¬ë¼ë”œ</div>
              <div style="font-size: 12px; color: var(--gray-500); margin-bottom: 12px;">ë¡œì»¬ ê³µêµ¬</div>
              <div style="font-size: 20px; font-weight: 700; color: var(--gray-900);">ì¤€ë¹„ì¤‘</div>
              <div style="font-size: 11px; color: var(--gray-500);">í˜„ê¸ˆíë¦„ ë³´ì™„</div>
            </div>
          </div>
        </div>

        <!-- íŒ€ KPI -->
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 24px;">
          <!-- ê¹€ì†¡í¬ -->
          <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
              <div>
                <div style="font-size: 18px; font-weight: 700;">ê¹€ì†¡í¬</div>
                <div style="font-size: 12px; color: var(--gray-500);">ê³µê¸‰ì—…ì²´ Â· ì‹œìŠ¤í…œ Â· ì´ê´„</div>
              </div>
              <div style="background: var(--primary); color: white; padding: 4px 10px; border-radius: 20px; font-size: 11px; font-weight: 600;">MAIN: ê³µê¸‰ì—…ì²´</div>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
              <div style="background: var(--gray-50); padding: 12px; border-radius: 8px; text-align: center;">
                <div style="font-size: 11px; color: var(--gray-500);">ì›” ëª©í‘œ</div>
                <div style="font-size: 18px; font-weight: 700;">2-3ê°œ</div>
                <div style="font-size: 10px; color: var(--gray-400);">ì‹ ê·œ ê³µê¸‰ì—…ì²´</div>
              </div>
              <div style="background: var(--success-light); padding: 12px; border-radius: 8px; text-align: center;">
                <div style="font-size: 11px; color: var(--success);">í•µì‹¬ KPI</div>
                <div style="font-size: 18px; font-weight: 700; color: var(--success);">30%</div>
                <div style="font-size: 10px; color: var(--success);">ìˆ˜ìˆ˜ë£Œ í˜‘ìƒ</div>
              </div>
            </div>
          </div>

          <!-- ì´ì±„ì€ -->
          <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
              <div>
                <div style="font-size: 18px; font-weight: 700;">ì´ì±„ì€</div>
                <div style="font-size: 12px; color: var(--gray-500);">ì…€ëŸ¬ ì˜¨ë³´ë”© Â· CS Â· ë§ˆì¼€íŒ…</div>
              </div>
              <div style="background: var(--info); color: white; padding: 4px 10px; border-radius: 20px; font-size: 11px; font-weight: 600;">MAIN: ì…€ëŸ¬</div>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
              <div style="background: var(--gray-50); padding: 12px; border-radius: 8px; text-align: center;">
                <div style="font-size: 11px; color: var(--gray-500);">ì›” ëª©í‘œ</div>
                <div style="font-size: 18px; font-weight: 700;">10-15ëª…</div>
                <div style="font-size: 10px; color: var(--gray-400);">ì‹ ê·œ ì…€ëŸ¬</div>
              </div>
              <div style="background: var(--info-light); padding: 12px; border-radius: 8px; text-align: center;">
                <div style="font-size: 11px; color: var(--info);">ì—°ê°„ ëª©í‘œ</div>
                <div style="font-size: 18px; font-weight: 700; color: var(--info);">350ëª…</div>
                <div style="font-size: 10px; color: var(--info);">ì…€ëŸ¬ ë¦¬ìŠ¤íŠ¸</div>
              </div>
            </div>
          </div>
        </div>

        <!-- í•µì‹¬ ì „ëµ ë°©í–¥ -->
        <div class="card">
          <div class="card-title">2026ë…„ í•µì‹¬ ì „ëµ ë°©í–¥</div>
          <div style="padding: 16px; background: var(--primary-light); border-radius: 8px; margin-bottom: 16px;">
            <strong style="color: var(--primary);">í•µì‹¬ ì „ëµ:</strong>
            <p style="margin-top: 8px; color: var(--gray-700);">ê³µê¸‰ì‚¬ ë‹¤ê°í™” + í•´ì™¸ ì§ìˆ˜ì…ì„ í†µí•œ ìˆœìµ ê·¹ëŒ€í™” ë° ì…€ëŸ¬ ë„¤íŠ¸ì›Œí¬ í™•ëŒ€</p>
          </div>
          <div style="display: grid; gap: 12px;">
            <div style="padding: 16px; background: var(--gray-50); border-radius: 8px;">
              <strong>1. 30% ìˆ˜ìˆ˜ë£Œ ê³µê¸‰ì‚¬ ë¹„ì¤‘ í™•ëŒ€</strong>
              <p style="color: var(--gray-600); font-size: 14px; margin-top: 4px;">ê³ ë§ˆì§„ ê³µê¸‰ì‚¬ ìš°ì„  ë°œêµ´ â†’ ëª©í‘œ 70% ë¹„ì¤‘</p>
            </div>
            <div style="padding: 16px; background: var(--gray-50); border-radius: 8px;">
              <strong>2. í•´ì™¸ ì§ìˆ˜ì… ì‹œì‘</strong>
              <p style="color: var(--gray-600); font-size: 14px; margin-top: 4px;">ì¼ë³¸ ìƒí’ˆ ì§ìˆ˜ì…ìœ¼ë¡œ ë§ˆì§„ ê·¹ëŒ€í™” (ëª©í‘œ ë§ˆì§„ 50%+)</p>
            </div>
            <div style="padding: 16px; background: var(--gray-50); border-radius: 8px;">
              <strong>3. ì…€ëŸ¬ ìƒíƒœê³„ ê°•í™”</strong>
              <p style="color: var(--gray-600); font-size: 14px; margin-top: 4px;">ì—°ê°„ 350ëª… ì…€ëŸ¬ í™•ë³´, ì¬ì°¸ì—¬ìœ¨ 60% ì´ìƒ</p>
            </div>
          </div>
        </div>
      </div>

      <!-- ê·¸ë¡œìŠ¤ë³´ë“œ -->
      <div id="tab-growth" class="tab-content">
        <div class="page-header">
          <h1 class="page-title">ê·¸ë¡œìŠ¤ë³´ë“œ</h1>
          <p class="page-desc">ì„±ì¥ ì§€í‘œ ë° ì‹¤í—˜ í˜„í™©</p>
        </div>

        <div class="kpi-grid">
          <div class="kpi-card">
            <div class="kpi-label">ê³µêµ¬ ì „í™˜ìœ¨</div>
            <div class="kpi-value" id="conversionRate">-</div>
          </div>
          <div class="kpi-card">
            <div class="kpi-label">í‰ê·  ê³µêµ¬ ê¸°ê°„</div>
            <div class="kpi-value" id="avgDealDays">-</div>
          </div>
          <div class="kpi-card">
            <div class="kpi-label">ì¬êµ¬ë§¤ìœ¨</div>
            <div class="kpi-value" id="repeatRate">-</div>
          </div>
          <div class="kpi-card">
            <div class="kpi-label">NPS ì ìˆ˜</div>
            <div class="kpi-value" id="npsScore">-</div>
          </div>
        </div>

        <div class="card">
          <div class="card-title">ì§„í–‰ì¤‘ ì‹¤í—˜</div>
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>ì‹¤í—˜ëª…</th>
                  <th>ìƒíƒœ</th>
                  <th>ê¸°ê°„</th>
                  <th>ê²°ê³¼</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>ì‹ ê·œ ìƒí’ˆ í˜ì´ì§€ A/B í…ŒìŠ¤íŠ¸</td>
                  <td><span style="color: var(--success);">ì§„í–‰ì¤‘</span></td>
                  <td>01.01 ~ 01.31</td>
                  <td>ì „í™˜ìœ¨ +12%</td>
                </tr>
                <tr>
                  <td>í‘¸ì‹œ ì•Œë¦¼ ìµœì í™”</td>
                  <td><span style="color: var(--info);">ë¶„ì„ì¤‘</span></td>
                  <td>12.15 ~ 12.31</td>
                  <td>í´ë¦­ë¥  +8%</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- ì—…ë¬´ê°€ì´ë“œ -->
      <div id="tab-guide" class="tab-content">
        <div class="page-header">
          <h1 class="page-title">ì—…ë¬´ê°€ì´ë“œ</h1>
          <p class="page-desc">í‘œì¤€ ì—…ë¬´ í”„ë¡œì„¸ìŠ¤ ë° ê°€ì´ë“œë¼ì¸</p>
        </div>

        <div class="card">
          <div class="card-title">ê³µêµ¬ ì§„í–‰ í”„ë¡œì„¸ìŠ¤</div>
          <div style="display: flex; gap: 16px; overflow-x: auto; padding: 8px 0;">
            <div style="flex: 0 0 150px; text-align: center; padding: 16px; background: var(--primary-light); border-radius: 12px;">
              <div style="font-size: 24px; margin-bottom: 8px;">1ï¸âƒ£</div>
              <div style="font-weight: 600; color: var(--primary);">ê³µê¸‰ì‚¬ í˜‘ì˜</div>
              <div style="font-size: 12px; color: var(--gray-600); margin-top: 4px;">ìƒí’ˆ/ê°€ê²© í˜‘ìƒ</div>
            </div>
            <div style="flex: 0 0 150px; text-align: center; padding: 16px; background: var(--gray-100); border-radius: 12px;">
              <div style="font-size: 24px; margin-bottom: 8px;">2ï¸âƒ£</div>
              <div style="font-weight: 600;">ì…€ëŸ¬ ë§¤ì¹­</div>
              <div style="font-size: 12px; color: var(--gray-600); margin-top: 4px;">íŒë§¤ì±„ë„ í™•ì •</div>
            </div>
            <div style="flex: 0 0 150px; text-align: center; padding: 16px; background: var(--gray-100); border-radius: 12px;">
              <div style="font-size: 24px; margin-bottom: 8px;">3ï¸âƒ£</div>
              <div style="font-weight: 600;">ê³µêµ¬ ì§„í–‰</div>
              <div style="font-size: 12px; color: var(--gray-600); margin-top: 4px;">íŒë§¤ ë° CS</div>
            </div>
            <div style="flex: 0 0 150px; text-align: center; padding: 16px; background: var(--success-light); border-radius: 12px;">
              <div style="font-size: 24px; margin-bottom: 8px;">4ï¸âƒ£</div>
              <div style="font-weight: 600; color: var(--success);">ì •ì‚° ì™„ë£Œ</div>
              <div style="font-size: 12px; color: var(--gray-600); margin-top: 4px;">ëŒ€ê¸ˆ ì§€ê¸‰</div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-title">ì£¼ìš” ì—…ë¬´ ê°€ì´ë“œ</div>
          <div style="display: grid; gap: 12px;">
            <a href="#" style="display: block; padding: 16px; background: var(--gray-50); border-radius: 8px; text-decoration: none; color: inherit;">
              <div style="font-weight: 600;">ğŸ“„ ê³µê¸‰ì‚¬ ê³„ì•½ ì²´í¬ë¦¬ìŠ¤íŠ¸</div>
              <div style="font-size: 13px; color: var(--gray-500); margin-top: 4px;">í•„ìˆ˜ í™•ì¸ ì‚¬í•­ ë° ê³„ì•½ì„œ ì–‘ì‹</div>
            </a>
            <a href="#" style="display: block; padding: 16px; background: var(--gray-50); border-radius: 8px; text-decoration: none; color: inherit;">
              <div style="font-weight: 600;">ğŸ’° ì •ì‚° í”„ë¡œì„¸ìŠ¤ ê°€ì´ë“œ</div>
              <div style="font-size: 13px; color: var(--gray-500); margin-top: 4px;">ì…€ëŸ¬/ê³µê¸‰ì‚¬ ì •ì‚° ì ˆì°¨</div>
            </a>
            <a href="#" style="display: block; padding: 16px; background: var(--gray-50); border-radius: 8px; text-decoration: none; color: inherit;">
              <div style="font-weight: 600;">ğŸ¯ ì˜ì—… ìŠ¤í¬ë¦½íŠ¸</div>
              <div style="font-size: 13px; color: var(--gray-500); margin-top: 4px;">ì‹ ê·œ íŒŒíŠ¸ë„ˆ ì»¨íƒ ì‹œ í™œìš©</div>
            </a>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- í† ìŠ¤íŠ¸ -->
  <div id="toast"></div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

  <script>
    // Firebase ì„¤ì •
    const firebaseConfig = {
      apiKey: "AIzaSyAQf_Cu9wMji5QsMBQns5eg6nOD_vmrZMs",
      authDomain: "moyeora-deal-manager.firebaseapp.com",
      projectId: "moyeora-deal-manager",
      storageBucket: "moyeora-deal-manager.firebasestorage.app",
      messagingSenderId: "527148187832",
      appId: "1:527148187832:web:dc35b0413a7157db34744d"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // ìƒíƒœ ê´€ë¦¬
    let state = {
      currentTab: 'dashboard',
      deals: [],
      suppliers: [],
      sellers: [],
      isLoggedIn: false
    };

    let adminPassword = 'admin1234';

    // ë¹„ë°€ë²ˆí˜¸ ë¡œë“œ
    async function loadAdminPassword() {
      try {
        const doc = await db.collection('settings').doc('admin').get();
        if (doc.exists && doc.data().password) {
          adminPassword = doc.data().password;
        }
      } catch (e) {
        console.error('ë¹„ë°€ë²ˆí˜¸ ë¡œë“œ ì‹¤íŒ¨:', e);
      }
    }

    // ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
    function checkLoginStatus() {
      const isLoggedIn = sessionStorage.getItem('moyeora_admin_logged_in') === 'true';
      if (isLoggedIn) {
        state.isLoggedIn = true;
        showApp();
      } else {
        showLogin();
      }
    }

    // ë¡œê·¸ì¸ ì²˜ë¦¬
    async function handleLogin() {
      const password = document.getElementById('loginPassword').value;
      const errorEl = document.getElementById('loginError');

      if (password === adminPassword) {
        state.isLoggedIn = true;
        sessionStorage.setItem('moyeora_admin_logged_in', 'true');
        showApp();
      } else {
        errorEl.textContent = 'ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.';
        errorEl.classList.add('show');
      }
    }

    // ë¡œê·¸ì¸ í™”ë©´ í‘œì‹œ
    function showLogin() {
      document.getElementById('loginScreen').style.display = 'flex';
      document.getElementById('appScreen').style.display = 'none';
    }

    // ì•± í™”ë©´ í‘œì‹œ
    function showApp() {
      document.getElementById('loginScreen').style.display = 'none';
      document.getElementById('appScreen').style.display = 'flex';
      setupListeners();
    }

    // Firebase ë¦¬ìŠ¤ë„ˆ
    function setupListeners() {
      db.collection('deals').orderBy('startDate', 'desc').onSnapshot(snapshot => {
        state.deals = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
        render();
      });

      db.collection('suppliers').orderBy('name').onSnapshot(snapshot => {
        state.suppliers = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
        render();
      });

      db.collection('sellers').orderBy('name').onSnapshot(snapshot => {
        state.sellers = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
        render();
      });
    }

    // íƒ­ ì „í™˜
    function switchTab(tabId) {
      state.currentTab = tabId;

      // ë„¤ë¹„ê²Œì´ì…˜ í™œì„±í™”
      document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
      });
      event.currentTarget.classList.add('active');

      // íƒ­ ì»¨í…ì¸  í‘œì‹œ
      document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
      });
      document.getElementById(`tab-${tabId}`).classList.add('active');

      render();
    }

    // OKR ê¸°ê°„ ì „í™˜
    function switchOkrPeriod(period) {
      document.querySelectorAll('.tab-nav .tab-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.currentTarget.classList.add('active');
      // TODO: ê¸°ê°„ë³„ OKR ë°ì´í„° ë¡œë“œ
    }

    // ì‚¬ì´ë“œë°” í† ê¸€
    function toggleSidebar() {
      document.querySelector('.sidebar').classList.toggle('open');
      document.querySelector('.sidebar-overlay').classList.toggle('show');
    }

    // ë Œë”ë§
    function render() {
      const today = new Date();
      today.setHours(0, 0, 0, 0);

      // ì§„í–‰ì¤‘ ê³µêµ¬ ìˆ˜
      const activeDeals = state.deals.filter(deal => {
        const start = new Date(deal.startDate);
        const end = new Date(deal.endDate);
        return today >= start && today <= end;
      });
      document.getElementById('activeDeals').textContent = activeDeals.length;

      // í˜‘ì˜ì¤‘ ê³µêµ¬ ìˆ˜
      const negotiatingDeals = state.deals.filter(d => d.status === 'negotiating');
      document.getElementById('negotiatingDeals').textContent = negotiatingDeals.length;

      // ê³µê¸‰ì‚¬ ìˆ˜
      document.getElementById('totalSuppliers').textContent = state.suppliers.length;

      // ì´ë²ˆ ë‹¬ ë§¤ì¶œ ê³„ì‚°
      const thisMonth = today.getMonth();
      const thisYear = today.getFullYear();
      const monthlyDeals = state.deals.filter(deal => {
        const end = new Date(deal.endDate);
        return end.getMonth() === thisMonth && end.getFullYear() === thisYear;
      });

      const monthlyRevenue = monthlyDeals.reduce((sum, deal) => {
        return sum + (deal.totalRevenue || 0);
      }, 0);

      document.getElementById('monthlyRevenue').textContent =
        monthlyRevenue > 0 ? `${(monthlyRevenue / 10000).toFixed(0)}ë§Œì›` : '0ì›';
      document.getElementById('revenueChange').textContent =
        monthlyRevenue > 0 ? 'ì „ì›” ëŒ€ë¹„ ê³„ì‚° ì¤‘' : 'ë°ì´í„° ìˆ˜ì§‘ ì¤‘';

      // ìµœê·¼ ì™„ë£Œ ê³µêµ¬ í…Œì´ë¸”
      const completedDeals = state.deals.filter(deal => {
        const end = new Date(deal.endDate);
        return today > end;
      }).slice(0, 5);

      const tableBody = document.getElementById('recentDealsTable');
      if (completedDeals.length === 0) {
        tableBody.innerHTML = '<tr><td colspan="4" style="text-align:center;color:var(--gray-500)">ì™„ë£Œëœ ê³µêµ¬ê°€ ì—†ìŠµë‹ˆë‹¤</td></tr>';
      } else {
        tableBody.innerHTML = completedDeals.map(deal => `
          <tr>
            <td>${deal.product || '-'}</td>
            <td>${deal.supplier || '-'}</td>
            <td>${deal.totalRevenue ? (deal.totalRevenue / 10000).toFixed(0) + 'ë§Œì›' : '-'}</td>
            <td>${deal.startDate} ~ ${deal.endDate}</td>
          </tr>
        `).join('');
      }

      // ê·¸ë¡œìŠ¤ë³´ë“œ ì§€í‘œ
      document.getElementById('conversionRate').textContent =
        state.deals.length > 0 ? `${((activeDeals.length / state.deals.length) * 100).toFixed(1)}%` : '-';
      document.getElementById('avgDealDays').textContent = '7ì¼';
      document.getElementById('repeatRate').textContent = '-';
      document.getElementById('npsScore').textContent = '-';

      // ì „ëµê¸°íš - ì—°ë„ë³„ ëª©í‘œ ë Œë”ë§
      renderYearlyGoals();

      // ì „ëµê¸°íš - í˜„ì¬ ì‹¤ì  ì—…ë°ì´íŠ¸
      document.getElementById('salesStats').innerHTML = `
        <span style="font-size: 11px; padding: 4px 10px; background: #dbeafe; color: #2563eb; border-radius: 4px;">ğŸ‘¥ ì…€ëŸ¬ ${state.sellers.length}ëª…</span>
        <span style="font-size: 11px; padding: 4px 10px; background: #dbeafe; color: #2563eb; border-radius: 4px;">ğŸ“¦ ê³µêµ¬ ${state.deals.length}ê±´</span>
      `;

      // ë„ë©”ì¸ë³„ ì „ëµ - ê³µê¸‰ì‚¬ ìˆ˜ ì—…ë°ì´íŠ¸
      document.getElementById('domainSuppliers').textContent = state.suppliers.length + 'ê°œ';
    }

    // ì—°ë„ë³„ ëª©í‘œ ë°ì´í„°
    const YEARLY_GOALS = {
      2025: { label: '25ë…„ MVP ê²€ì¦', target: 100000000, growth: 90, sales: 10 },
      2026: { label: '26ë…„ PMF ë‹¬ì„±', target: 500000000, growth: 70, sales: 30 },
      2027: { label: '27ë…„ ì„±ì¥ ê°€ì†', target: 2000000000, growth: 50, sales: 50 },
      2028: { label: '28ë…„ ê·œëª¨ í™•ì¥', target: 5000000000, growth: 30, sales: 70 }
    };

    // ì—°ë„ë³„ ëª©í‘œ ë Œë”ë§
    function renderYearlyGoals() {
      const currentYear = new Date().getFullYear();
      const grid = document.getElementById('yearlyGoalsGrid');
      if (!grid) return;

      let html = '';
      [2025, 2026, 2027, 2028].forEach(year => {
        const goal = YEARLY_GOALS[year];
        const isCurrentYear = year === currentYear;

        // í•´ë‹¹ ì—°ë„ ë§¤ì¶œ ê³„ì‚°
        const yearDeals = state.deals.filter(d => d.endDate && d.endDate.startsWith(String(year)));
        const yearRevenue = yearDeals.reduce((sum, d) => sum + (d.totalRevenue || 0), 0);
        const yearProgress = year <= currentYear ? Math.min(100, (yearRevenue / goal.target) * 100) : 0;

        html += `
          <div style="background: white; border-radius: 16px; padding: 20px; border: ${isCurrentYear ? '3px solid var(--primary)' : '1px solid var(--gray-200)'}; position: relative;">
            ${isCurrentYear ? '<div style="position: absolute; top: -10px; right: 16px; background: var(--primary); color: white; font-size: 11px; padding: 4px 10px; border-radius: 20px; font-weight: 600;">ì˜¬í•´</div>' : ''}
            <div style="font-size: 14px; font-weight: 700; color: var(--gray-900); margin-bottom: 8px;">${goal.label}</div>
            <div style="font-size: 28px; font-weight: 800; color: var(--primary); margin-bottom: 4px;">${(goal.target / 100000000)}ì–µ</div>
            <div style="display: flex; gap: 6px; margin-bottom: 12px;">
              <span style="font-size: 11px; padding: 3px 8px; background: #dcfce7; color: #16a34a; border-radius: 4px;">ê·¸ë¡œìŠ¤ ${goal.growth}%</span>
              <span style="font-size: 11px; padding: 3px 8px; background: #dbeafe; color: #2563eb; border-radius: 4px;">ì˜ì—… ${goal.sales}%</span>
            </div>
            <div style="background: var(--gray-200); height: 6px; border-radius: 3px;">
              <div style="background: ${isCurrentYear ? 'var(--primary)' : 'var(--gray-400)'}; height: 100%; width: ${yearProgress}%; border-radius: 3px;"></div>
            </div>
            <div style="font-size: 11px; color: var(--gray-500); margin-top: 6px; text-align: right;">${yearProgress.toFixed(0)}% ë‹¬ì„±</div>
          </div>
        `;
      });

      grid.innerHTML = html;

      // í˜„ì¬ ì—°ë„ ê·¸ë¡œìŠ¤/ì˜ì—… ë¹„ìœ¨ ì—…ë°ì´íŠ¸
      const currentGoal = YEARLY_GOALS[currentYear] || YEARLY_GOALS[2026];
      document.getElementById('growthPercent').textContent = currentGoal.growth + '%';
      document.getElementById('salesPercent').textContent = currentGoal.sales + '%';
    }

    // í† ìŠ¤íŠ¸ ë©”ì‹œì§€
    function showToast(msg) {
      const toast = document.getElementById('toast');
      toast.textContent = msg;
      toast.style.display = 'block';
      setTimeout(() => toast.style.display = 'none', 2500);
    }

    // ì´ˆê¸°í™”
    document.addEventListener('DOMContentLoaded', () => {
      loadAdminPassword();
      checkLoginStatus();
    });
  </script>
</body>
</html>
