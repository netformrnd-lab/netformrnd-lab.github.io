# 변경 이력 (Changelog)

## 2026-01-23 최근 주요 업데이트

### PR #549: KPI 계층 구조 확장 - 총 성과지표/하위지표 추가
**커밋**: f2bb1c0
**파일**: admin/strategy/index.html (+722, -45)

#### 새로운 KPI 계층 구조
기존의 단순한 구조를 확장하여 더 세밀한 성과 관리가 가능하도록 개선:

```
서브 KPI → 총 성과지표(NEW) → 성과지표(단위별) → 하위지표(NEW) → 업무일지
```

#### 주요 변경사항
1. **상태 관리 확장**
   - `okrState`에 `totalMetrics`(총 성과지표), `subIndicators`(하위지표) 상태 추가
   - 새로운 Firestore 컬렉션 연동: `okr_totalMetrics`, `okr_subIndicators`

2. **계산 함수 추가**
   - `calcTotalMetricRate()`: 총 성과지표 달성률 계산
   - `calcUnitMetricRate()`: 단위별 성과지표 달성률 계산
   - `calcSubIndicatorValue()`: 하위지표 값 집계

3. **UI/UX 개선**
   - 마인드맵 뷰에서 새로운 계층 구조 시각화 지원
   - KPI 계층 구조 관리 모달 추가 (`openKpiHierarchyModal`)
   - 업무 기록 시 하위지표 선택 기능 추가

4. **CRUD 기능**
   - 총 성과지표 생성/수정/삭제
   - 하위지표 생성/수정/삭제
   - 기존 데이터와의 하위 호환성 유지

#### 영향 범위
- 전략 관리 페이지의 KPI 관리 기능 전반
- 업무일지 작성 시 성과지표 선택 로직

---

### PR #548: 그로스보드 내용 업데이트 - 성장 전략 & 데이터 활용 체계
**커밋**: 6e21393
**파일**: growthboard/songhee/index.html (+396, -411)
**발표자**: 송희 (5-10분)

#### 주요 내용
1. **데이터 활용 전략**
   - 업무일지-그로스보드 일체화
   - KPI 세분화 구조 정립
   - 성과 지표 자동 집계 체계

2. **영업 프로세스 데이터화**
   - 5단계 영업 여정 세분화
     - 리드 생성 → 상담 → 제안 → 계약 → 유지관리
   - 각 단계별 핵심 데이터 추출 및 분석

3. **영업 능률 증진**
   - CRM 센터 구축 계획
   - 톤앤매너 가이드 제작
   - 표준화된 영업 프로세스

4. **파트너 확보 전략**
   - 3PL 물류창고 제휴 추진
   - 메가셀러 우선 확보 전략

5. **시장 차별점**
   - 1,000명+ 앰버서더 커뮤니티
   - 신뢰 기반 추천 시스템
   - 예약판매/수입수출 지원

#### 영향 범위
- 그로스보드 발표 자료
- 전사 성장 전략 방향성

---

### PR #547: GitHub Pages 디스플레이 수정
**커밋**: 1a9ab4b, ba4d795
**파일**: admin2/index.html, admin/index.html

#### 주요 수정사항
1. **문의관리 메모/상태변경 버튼 ID 전달 오류 수정** (1a9ab4b)
   - 버튼 클릭 시 올바른 문의 ID가 전달되지 않던 문제 해결
   - `admin2/index.html` 5줄 수정

2. **iOS 캘린더 스타일로 일정 레이아웃 개선** (ba4d795)
   - 모바일 친화적인 일정 표시
   - 반응형 레이아웃 최적화

#### 영향 범위
- 관리자 페이지 문의관리 기능
- 일정 관리 UI

---

### PR #546: KPI/OKR 실시간 알림 시스템 통합
**커밋**: f2582ad, cd72c52
**파일**:
- admin/index.html (+16)
- admin/strategy/index.html (+213, -2)

#### 새로운 알림 유형
1. **서브 KPI 목표 달성 알림**
   - 100% 달성 시 팀 전체에 축하 알림
   - 자동 트리거 및 팀 공유

2. **메인 KPI 마일스톤 알림**
   - 50%, 80%, 100% 달성 시점에 자동 알림
   - 진행 상황 가시성 향상

3. **마감일 임박 알림**
   - 3일 전, 1일 전 자동 알림
   - 일정 관리 지원

4. **팀 활동 알림**
   - 성과지표 기록 시 팀원에게 실시간 알림
   - 협업 활성화

5. **정산 연동 알림**
   - 정산 데이터 → 서브 KPI 자동 반영 시 알림
   - 데이터 동기화 투명성

#### 기술적 개선
- 알림 아이콘 매핑 업데이트
  - `kpi_achieved`, `kpi_deadline`, `main_kpi_milestone`, `team_activity`, `settlement_sync`
- 실시간 알림 발송 로직 구현
- Firestore 트리거 기반 자동화

#### 영향 범위
- 전체 알림 시스템
- KPI/OKR 관리 워크플로우

---

## 기타 최근 개선사항

### 문의관리 시스템 개선
- **메모 수정 후 화면 갱신 버그 수정** (95a5a38)
- 사용자 경험 개선

### 정산 자동화
- **정산→서브 KPI 자동 연동 기능 구현** (9ce265d)
- 수동 입력 없이 정산 데이터가 자동으로 서브 KPI에 반영
- 데이터 정확성 및 업무 효율성 향상

### 랜딩페이지 개선
- **AI 챗봇 서비스를 3타겟 카드에 추가** (7934e00)
- **shop 섹션 재구성** (57ae571, 8edd9c8, b784054)
  - 3타겟 카드 형식으로 전면 개편
  - 애니메이션 플로우 추가
  - 가치 중심 메시지로 강화
- **자체 쇼핑몰 미리보기 섹션 추가** (7a150ae)

---

## 변경 이력 요약

| PR # | 제목 | 주요 변경 파일 | 영향도 |
|------|------|----------------|--------|
| #549 | KPI 계층 구조 확장 | admin/strategy/index.html | 🔴 High |
| #548 | 그로스보드 업데이트 | growthboard/songhee/index.html | 🟡 Medium |
| #547 | 디스플레이 수정 | admin2/index.html, admin/index.html | 🟢 Low |
| #546 | 실시간 알림 시스템 | admin/index.html, admin/strategy/index.html | 🔴 High |

---

## 다음 단계

### 계획된 기능
- [ ] KPI 계층 구조 사용자 매뉴얼 작성
- [ ] 알림 설정 커스터마이징 기능
- [ ] 성과 대시보드 시각화 개선

### 기술 부채
- [ ] 레거시 KPI 데이터 마이그레이션 스크립트
- [ ] 알림 스팸 방지 로직
- [ ] 모바일 최적화 추가 개선

---

**마지막 업데이트**: 2026-01-23
**작성자**: Claude Code
**세션**: claude/document-recent-changes-f9TEG
