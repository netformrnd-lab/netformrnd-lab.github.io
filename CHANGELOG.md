# 변경 이력 (Changelog)

## 2026-01-25 통합 대시보드 및 모바일 최적화

### PR #TBD: 통합 대시보드 + 모바일 반응형 UI
**커밋**: d58ecdd
**파일**:
- admin/strategy/index.html (+600줄: 통합 대시보드 + 모바일 CSS)
- admin/strategy/meeting-history.html (+107줄: 모바일 최적화)

#### 🚀 통합 대시보드 (NEW)

**위치**: 전략센터 → 목표/분석 → 🚀 통합 대시보드

한 화면에 미팅, 액션, 업무, KPI를 모두 표시하는 통합 뷰입니다.

**4개 핵심 섹션:**
- 🎯 **내 액션 아이템** (마감 임박순, 최대 5개)
  - 지연/임박 상태 색상 코딩
  - 대시보드에서 바로 완료 처리
- 📝 **최근 업무 기록** (오늘/어제, 최대 10개)
  - 성과지표별 작업 내역
  - 메모 미리보기
- 📅 **최근 미팅** (7일 이내, 최대 5개)
  - 액션 완료율 표시
  - 연관 KPI 개수
- 📊 **주요 KPI 현황** (Top 5)
  - 진행률 바 차트
  - 정상(녹)/주의(노)/지연(빨) 상태

**빠른 액션:**
```
[✓ 완료] → 액션 즉시 완료 처리
[📝 기록] → 업무일지 작성 화면으로 이동
각 카드 클릭 → 해당 상세 페이지로 이동
```

#### 📱 모바일 최적화

**반응형 레이아웃:**
- Desktop (1200px+): 2-컬럼 그리드
- Tablet (768-1200px): 1-컬럼 스택
- Mobile (480-768px): 축소 UI
- Small (～480px): 최소 UI

**모바일 개선:**
- ✅ 터치 타겟 44px 이상
- ✅ 버튼 전체 너비 (터치 용이)
- ✅ 카드 여백 축소 (공간 효율)
- ✅ 네비게이션 메뉴 간격 확대
- ✅ 폰트 크기 자동 조정

**meeting-history.html:**
- 모바일에서 입력 필드 전체 너비
- 뷰 토글 2×2 그리드
- 액션 아이템 세로 정렬

#### 사용 시나리오

**모바일 (출근길 스마트폰):**
1. 통합 대시보드 확인
2. 지연된 액션 2개 발견 (빨간색)
3. 터치로 완료 처리
4. 오늘 미팅 확인

**태블릿 (회의 중):**
1. 미팅 히스토리 → 새 보고서
2. 터치로 빠른 입력
3. 액션 아이템 등록
4. 연관 KPI 선택

**데스크톱:**
1. 2-컬럼 통합 뷰
2. 모든 정보 한눈에
3. 마우스 호버 상세
4. 클릭으로 이동

---

## 2026-01-25 시스템 통합 및 워크플로우 개선

### PR #TBD: 3-시스템 완벽 통합 - 미팅/업무관리/KPI 연동
**커밋**: 046e156
**파일**:
- admin/strategy/meeting-history.html (+388, -49)
- admin/strategy/index.html (업무관리 탭 개선)

#### 핵심 개선사항

**1. 미팅 히스토리 시스템 현대화**
- **LocalStorage → Firestore 마이그레이션**
  - 기존: 브라우저 로컬 저장소 (격리, 동기화 불가)
  - 개선: Firestore 실시간 데이터베이스 (팀 공유, 자동 동기화)
  - 컬렉션: `okr_meetings`
- **실시간 협업 지원**
  - 미팅 보고서 작성 즉시 팀 전체 반영
  - 기기/브라우저 간 완벽한 데이터 동기화
  - 데이터 손실 위험 제거

**2. KPI-미팅 연결 시스템**
- **양방향 링크 구축**
  - 미팅 보고서에서 관련 KPI 선택 가능 (`relatedKpiIds`)
  - KPI 뷰에서 관련 미팅 이력 조회 가능
- **전략 의사결정 추적성**
  - "왜 이 KPI 목표를 변경했는가?" → 관련 미팅 확인
  - 전략 실행 맥락(context) 보존

**3. 액션 아이템-업무일지 자동 연동**
- **업무관리 탭 통합 UI**
  ```
  업무관리 탭
    ├─ [NEW] 미팅 액션 아이템 카드
    │   ├─ 최근 30일 미팅의 미완료 액션
    │   ├─ 본인 할당 항목만 필터링
    │   ├─ 마감일 기반 우선순위 (지연/임박 표시)
    │   └─ 원클릭 완료 처리 or 업무일지 작성
    └─ 기존 업무일지 타임라인
  ```
- **스마트 알림**
  - 🔴 지연: 마감일 초과 액션
  - 🟠 임박: 3일 내 마감 액션
- **완료 추적**
  - 액션 아이템에 `completed`, `completedAt`, `worklogId` 필드 추가
  - 미팅 결정사항 → 실제 실행 연결

**4. 통합 데이터 흐름**

| 구분 | Before (분리) | After (통합) |
|------|--------------|-------------|
| **미팅 기록** | LocalStorage (격리) | Firestore (공유) |
| **액션 아이템** | 수동 추적 필요 | 업무탭 자동 표시 |
| **업무일지** | 별도 입력 | 미팅→업무 원스톱 |
| **KPI 연결** | 없음 | 양방향 링크 |
| **추적성** | 불가능 | 완벽한 audit trail |

**통합 워크플로우:**
```
1. 미팅 기록 (meeting-history.html)
   - 참석자, 안건, 논의내용, 결정사항
   - 액션 아이템 등록 (담당자, 마감일)
   - 연관 KPI 선택
          ↓
2. 자동 동기화 (Firestore)
   - 팀 전체 실시간 공유
   - okr_meetings 컬렉션 저장
          ↓
3. 업무관리 탭 자동 표시
   - 본인 할당 액션 아이템 카드 표시
   - 마감일순 정렬, 우선순위 시각화
          ↓
4. 업무일지 작성
   - 액션 아이템 → 성과지표 기록
   - worklogId 자동 링크
          ↓
5. KPI 자동 집계
   - 업무일지 → 성과지표 → 총 성과지표 → 서브 KPI
   - 미팅 의사결정의 실행 결과 가시화
```

#### 기술적 세부사항

**meeting-history.html:**
- Firebase SDK 통합 (App, Firestore, Auth)
- 실시간 리스너: `db.collection('okr_meetings').onSnapshot()`
- 인증 체크: `auth.onAuthStateChanged()`
- KPI 선택기: Main KPI/Sub KPI 통합 드롭다운
- 액션 아이템 구조 확장:
  ```javascript
  {
    task: string,
    assignee: string,
    deadline: date,
    completed: boolean,      // NEW
    completedAt: timestamp,  // NEW
    worklogId: string        // NEW (업무일지 연결)
  }
  ```

**index.html (업무관리 탭):**
- `loadMeetingActionItems()`: 30일 내 미완료 액션 로드
- `completeActionItemViaWorklog()`: 액션 완료 처리
- `createWorklogFromActionItem()`: 미팅→업무일지 연동
- 필터 로직:
  - 본인 할당 or 담당자 미지정
  - 완료 제외 (`!item.completed`)
  - 최근 30일 미팅만

#### UI/UX 개선

**미팅 히스토리 카드:**
- 👥 참석자 수
- 🎯 액션 아이템 개수
- 📊 연관 KPI 개수 (NEW)

**액션 아이템 카드 (업무관리 탭):**
```
🎯 미팅 액션 아이템 (3개)        [미팅 히스토리 →]
┌─────────────────────────────────────────────┐
│ CRM 센터 요구사항 정의서 작성      [지연]    │
│ 📋 2026년 1분기 전략회의 (2026-01-15)       │
│ 📅 마감: 2026-01-20                         │
│ [✓ 완료 처리] [📝 업무일지 작성]            │
└─────────────────────────────────────────────┘
```

#### 사용자 가치

✅ **중복 작업 제거**
- Before: 미팅 기록 → 별도로 업무일지 작성 → 수동으로 KPI 업데이트
- After: 미팅 기록 → 자동 액션 표시 → 원클릭 업무일지 → KPI 자동 집계

✅ **누락 방지**
- 모든 액션 아이템이 업무관리 탭에 자동 표시
- 마감일 알림으로 지연 액션 즉시 파악

✅ **전략 실행 추적**
- KPI 변화의 원인 (어떤 미팅 결정?) 추적 가능
- 의사결정 → 실행 → 결과의 완전한 audit trail

✅ **팀 협업 강화**
- 실시간 미팅 보고서 공유
- 담당자별 액션 자동 필터링
- 진행 상황 투명성 확보

#### 영향 범위
- 전략센터 전체 워크플로우
- 미팅 기록 → 업무 실행 → KPI 관리 전 주기

---

## 2026-01-23 최근 주요 업데이트

### PR #549: KPI 계층 구조 확장 - 총 성과지표/하위지표 추가
**커밋**: f2bb1c0
**파일**: admin/strategy/index.html (+722, -45)

#### 새로운 KPI 계층 구조
기존의 단순한 구조를 확장하여 더 세밀한 성과 관리가 가능하도록 개선:

```
서브 KPI → 총 성과지표(NEW) → 성과지표(단위별) → 하위지표(NEW) → 업무일지
```

#### 주요 변경사항
1. **상태 관리 확장**
   - `okrState`에 `totalMetrics`(총 성과지표), `subIndicators`(하위지표) 상태 추가
   - 새로운 Firestore 컬렉션 연동: `okr_totalMetrics`, `okr_subIndicators`

2. **계산 함수 추가**
   - `calcTotalMetricRate()`: 총 성과지표 달성률 계산
   - `calcUnitMetricRate()`: 단위별 성과지표 달성률 계산
   - `calcSubIndicatorValue()`: 하위지표 값 집계

3. **UI/UX 개선**
   - 마인드맵 뷰에서 새로운 계층 구조 시각화 지원
   - KPI 계층 구조 관리 모달 추가 (`openKpiHierarchyModal`)
   - 업무 기록 시 하위지표 선택 기능 추가

4. **CRUD 기능**
   - 총 성과지표 생성/수정/삭제
   - 하위지표 생성/수정/삭제
   - 기존 데이터와의 하위 호환성 유지

#### 영향 범위
- 전략 관리 페이지의 KPI 관리 기능 전반
- 업무일지 작성 시 성과지표 선택 로직

---

### PR #548: 그로스보드 내용 업데이트 - 성장 전략 & 데이터 활용 체계
**커밋**: 6e21393
**파일**: growthboard/songhee/index.html (+396, -411)
**발표자**: 송희 (5-10분)

#### 주요 내용
1. **데이터 활용 전략**
   - 업무일지-그로스보드 일체화
   - KPI 세분화 구조 정립
   - 성과 지표 자동 집계 체계

2. **영업 프로세스 데이터화**
   - 5단계 영업 여정 세분화
     - 리드 생성 → 상담 → 제안 → 계약 → 유지관리
   - 각 단계별 핵심 데이터 추출 및 분석

3. **영업 능률 증진**
   - CRM 센터 구축 계획
   - 톤앤매너 가이드 제작
   - 표준화된 영업 프로세스

4. **파트너 확보 전략**
   - 3PL 물류창고 제휴 추진
   - 메가셀러 우선 확보 전략

5. **시장 차별점**
   - 1,000명+ 앰버서더 커뮤니티
   - 신뢰 기반 추천 시스템
   - 예약판매/수입수출 지원

#### 영향 범위
- 그로스보드 발표 자료
- 전사 성장 전략 방향성

---

### PR #547: GitHub Pages 디스플레이 수정
**커밋**: 1a9ab4b, ba4d795
**파일**: admin2/index.html, admin/index.html

#### 주요 수정사항
1. **문의관리 메모/상태변경 버튼 ID 전달 오류 수정** (1a9ab4b)
   - 버튼 클릭 시 올바른 문의 ID가 전달되지 않던 문제 해결
   - `admin2/index.html` 5줄 수정

2. **iOS 캘린더 스타일로 일정 레이아웃 개선** (ba4d795)
   - 모바일 친화적인 일정 표시
   - 반응형 레이아웃 최적화

#### 영향 범위
- 관리자 페이지 문의관리 기능
- 일정 관리 UI

---

### PR #546: KPI/OKR 실시간 알림 시스템 통합
**커밋**: f2582ad, cd72c52
**파일**:
- admin/index.html (+16)
- admin/strategy/index.html (+213, -2)

#### 새로운 알림 유형
1. **서브 KPI 목표 달성 알림**
   - 100% 달성 시 팀 전체에 축하 알림
   - 자동 트리거 및 팀 공유

2. **메인 KPI 마일스톤 알림**
   - 50%, 80%, 100% 달성 시점에 자동 알림
   - 진행 상황 가시성 향상

3. **마감일 임박 알림**
   - 3일 전, 1일 전 자동 알림
   - 일정 관리 지원

4. **팀 활동 알림**
   - 성과지표 기록 시 팀원에게 실시간 알림
   - 협업 활성화

5. **정산 연동 알림**
   - 정산 데이터 → 서브 KPI 자동 반영 시 알림
   - 데이터 동기화 투명성

#### 기술적 개선
- 알림 아이콘 매핑 업데이트
  - `kpi_achieved`, `kpi_deadline`, `main_kpi_milestone`, `team_activity`, `settlement_sync`
- 실시간 알림 발송 로직 구현
- Firestore 트리거 기반 자동화

#### 영향 범위
- 전체 알림 시스템
- KPI/OKR 관리 워크플로우

---

## 기타 최근 개선사항

### 문의관리 시스템 개선
- **메모 수정 후 화면 갱신 버그 수정** (95a5a38)
- 사용자 경험 개선

### 정산 자동화
- **정산→서브 KPI 자동 연동 기능 구현** (9ce265d)
- 수동 입력 없이 정산 데이터가 자동으로 서브 KPI에 반영
- 데이터 정확성 및 업무 효율성 향상

### 랜딩페이지 개선
- **AI 챗봇 서비스를 3타겟 카드에 추가** (7934e00)
- **shop 섹션 재구성** (57ae571, 8edd9c8, b784054)
  - 3타겟 카드 형식으로 전면 개편
  - 애니메이션 플로우 추가
  - 가치 중심 메시지로 강화
- **자체 쇼핑몰 미리보기 섹션 추가** (7a150ae)

---

## 변경 이력 요약

| PR # | 제목 | 주요 변경 파일 | 영향도 |
|------|------|----------------|--------|
| #549 | KPI 계층 구조 확장 | admin/strategy/index.html | 🔴 High |
| #548 | 그로스보드 업데이트 | growthboard/songhee/index.html | 🟡 Medium |
| #547 | 디스플레이 수정 | admin2/index.html, admin/index.html | 🟢 Low |
| #546 | 실시간 알림 시스템 | admin/index.html, admin/strategy/index.html | 🔴 High |

---

## 다음 단계

### 계획된 기능
- [ ] KPI 계층 구조 사용자 매뉴얼 작성
- [ ] 알림 설정 커스터마이징 기능
- [ ] 성과 대시보드 시각화 개선

### 기술 부채
- [ ] 레거시 KPI 데이터 마이그레이션 스크립트
- [ ] 알림 스팸 방지 로직
- [ ] 모바일 최적화 추가 개선

---

**마지막 업데이트**: 2026-01-23
**작성자**: Claude Code
**세션**: claude/document-recent-changes-f9TEG
