<!DOCTYPE html>
<html lang="ko">
<head>
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê³µê¸‰ì‚¬ ì£¼ë¬¸í˜„í™© - ëª¨ì—¬ë¼ë”œ</title>
    <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #f5f5f5; font-family: 'Pretendard', -apple-system, sans-serif; min-height: 100vh; }

        .header { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); padding: 16px 24px; color: #fff; }
        .header-inner { max-width: 1400px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; }
        .logo { font-size: 18px; font-weight: 700; text-decoration: none; color: #fff; display: flex; align-items: center; gap: 8px; }
        .nav-menu { display: flex; gap: 4px; }
        .nav-item { padding: 8px 16px; border-radius: 8px; text-decoration: none; color: rgba(255,255,255,0.9); font-size: 14px; font-weight: 500; transition: all 0.2s; }
        .nav-item:hover { background: rgba(255,255,255,0.15); }
        .nav-item.active { background: rgba(255,255,255,0.25); color: #fff; font-weight: 600; }
        .user-info { display: flex; align-items: center; gap: 12px; font-size: 14px; }
        .user-name { font-weight: 600; background: rgba(255,255,255,0.2); padding: 6px 14px; border-radius: 6px; }
        .logout-btn { background: rgba(255,255,255,0.2); border: none; color: #fff; padding: 6px 14px; border-radius: 6px; cursor: pointer; font-size: 13px; }
        .logout-btn:hover { background: rgba(255,255,255,0.3); }

        .container { max-width: 1400px; margin: 0 auto; padding: 24px; }

        /* Login Section */
        .login-section { display: flex; align-items: center; justify-content: center; min-height: calc(100vh - 80px); }
        .login-card { background: #fff; border-radius: 16px; padding: 48px; box-shadow: 0 4px 24px rgba(0,0,0,0.08); max-width: 400px; width: 100%; text-align: center; }
        .login-title { font-size: 24px; font-weight: 700; color: #333; margin-bottom: 8px; }
        .login-desc { font-size: 14px; color: #888; margin-bottom: 32px; }
        .login-input { width: 100%; padding: 14px 16px; border: 1px solid #e0e0e0; border-radius: 8px; font-size: 15px; margin-bottom: 16px; }
        .login-input:focus { outline: none; border-color: #f59e0b; }
        .login-btn { width: 100%; padding: 14px; background: #f59e0b; color: #fff; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; }
        .login-btn:hover { background: #d97706; }

        /* Dashboard */
        .dashboard { display: none; }
        .dashboard.active { display: block; }

        .page-header { margin-bottom: 24px; }
        .page-title { font-size: 24px; font-weight: 700; color: #333; margin-bottom: 4px; }
        .page-desc { font-size: 14px; color: #888; }

        .stats-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 32px; }
        .stat-card { background: #fff; border-radius: 12px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.04); }
        .stat-card.primary { background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); }
        .stat-label { font-size: 13px; color: #888; margin-bottom: 6px; }
        .stat-value { font-size: 28px; font-weight: 700; color: #333; }
        .stat-card.primary .stat-value { color: #d97706; }

        .section-title { font-size: 18px; font-weight: 600; color: #333; margin-bottom: 16px; }

        .deal-group { background: #fff; border-radius: 12px; padding: 20px; margin-bottom: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.04); }
        .deal-header { display: flex; justify-content: space-between; align-items: center; padding-bottom: 12px; border-bottom: 2px solid #f59e0b; margin-bottom: 16px; }
        .deal-title { font-size: 16px; font-weight: 600; color: #f59e0b; }
        .deal-stats { display: flex; gap: 16px; font-size: 13px; color: #666; }

        .table-wrapper { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; font-size: 13px; }
        th { background: #f9fafb; padding: 12px 10px; text-align: center; font-weight: 600; color: #6b7280; border-bottom: 2px solid #e5e7eb; }
        td { padding: 10px; border-bottom: 1px solid #f0f0f0; text-align: center; vertical-align: middle; }
        tr:hover { background: #fafafa; }

        .badge { display: inline-block; padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 600; color: white; }
        .badge-primary { background: #f59e0b; }
        .badge-success { background: #10b981; }
        .badge-info { background: #3b82f6; }
        .badge-warning { background: #eab308; }
        .badge-danger { background: #ef4444; }
        .badge-gray { background: #6b7280; }

        .tracking-input { padding: 6px 10px; border: 1px solid #e0e0e0; border-radius: 6px; font-size: 13px; width: 150px; }
        .tracking-input:focus { outline: none; border-color: #f59e0b; }
        .carrier-select { padding: 6px 10px; border: 1px solid #e0e0e0; border-radius: 6px; font-size: 13px; width: 140px; background: white; }
        .carrier-select:focus { outline: none; border-color: #f59e0b; }
        .btn-sm { padding: 6px 12px; border: none; border-radius: 6px; font-size: 13px; font-weight: 600; cursor: pointer; }
        .btn-primary { background: #f59e0b; color: #fff; }
        .btn-primary:hover { background: #d97706; }
        .shipping-cell { display: flex; gap: 6px; align-items: center; justify-content: center; }

        .empty-state { text-align: center; padding: 60px 20px; color: #999; }

        .loading { display: inline-block; width: 20px; height: 20px; border: 3px solid rgba(245,158,11,0.3); border-top-color: #f59e0b; border-radius: 50%; animation: spin 0.8s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }

        @media (max-width: 768px) {
            .stats-row { grid-template-columns: repeat(2, 1fr); }
            .deal-header { flex-direction: column; align-items: flex-start; gap: 8px; }
            table { min-width: 900px; }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-inner">
            <a href="/" class="logo">
                <span>â˜€ï¸ëª¨ì—¬ë¼ë”œ</span>
            </a>
            <div class="nav-menu" id="navMenu" style="display: none;">
                <a href="portal.html" class="nav-item">ì •ì‚°ì„œ</a>
                <a href="orders.html" class="nav-item active">ì£¼ë¬¸í˜„í™©</a>
                <a href="proposal-manager.html" class="nav-item">ì œì•ˆì„œ</a>
            </div>
            <div class="user-info" id="userInfo" style="display: none;">
                <span class="user-name" id="displayName"></span>
                <button class="logout-btn" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </div>
    </div>

    <!-- Login Section -->
    <div class="login-section" id="loginSection">
        <div class="login-card">
            <h1 class="login-title">ê³µê¸‰ì‚¬ ì£¼ë¬¸í˜„í™©</h1>
            <p class="login-desc">ë“±ë¡ëœ ë¸Œëœë“œëª…(ê³µê¸‰ì‚¬ëª…)ì„ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
            <input type="text" class="login-input" id="supplierNameInput" placeholder="ë¸Œëœë“œëª… (ì˜ˆ: ë¡œì§€ì˜¤ê°€ë‹‰)">
            <button class="login-btn" onclick="login()">ì£¼ë¬¸í˜„í™© ì¡°íšŒ</button>
        </div>
    </div>

    <!-- Dashboard -->
    <div class="container dashboard" id="dashboard">
        <div class="page-header">
            <h1 class="page-title">ğŸ“¦ ì£¼ë¬¸í˜„í™©</h1>
            <p class="page-desc">ì¹´í˜24 ì£¼ë¬¸ ë°ì´í„° ê¸°ì¤€ (10ë¶„ë§ˆë‹¤ ìë™ ìˆ˜ì§‘)</p>
        </div>

        <div class="stats-row">
            <div class="stat-card">
                <div class="stat-label">ì´ ì£¼ë¬¸</div>
                <div class="stat-value" id="totalOrders">0ê±´</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">ê²°ì œì™„ë£Œ</div>
                <div class="stat-value" id="paidOrders">0ê±´</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">ë°°ì†¡ëŒ€ê¸°</div>
                <div class="stat-value" id="pendingOrders">0ê±´</div>
            </div>
            <div class="stat-card primary">
                <div class="stat-label">ì´ ì£¼ë¬¸ê¸ˆì•¡</div>
                <div class="stat-value" id="totalAmount">0ì›</div>
            </div>
        </div>

        <h2 class="section-title">ë”œë³„ ì£¼ë¬¸ ë‚´ì—­</h2>
        <div id="dealGroups"></div>

        <div class="empty-state" id="emptyState" style="display: none;">
            <p>ì£¼ë¬¸ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤</p>
        </div>
    </div>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAQf_Cu9wMji5QsMBQns5eg6nOD_vmrZMs",
            authDomain: "moyeora-deal-manager.firebaseapp.com",
            projectId: "moyeora-deal-manager",
            storageBucket: "moyeora-deal-manager.firebasestorage.app",
            messagingSenderId: "527148187832",
            appId: "1:527148187832:web:dc35b0413a7157db34744d"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        let currentSupplier = null;
        let currentSupplierId = null;

        async function login() {
            const supplierName = document.getElementById('supplierNameInput').value.trim();
            if (!supplierName) {
                alert('ê³µê¸‰ì‚¬ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');
                return;
            }

            try {
                // ê³µê¸‰ì‚¬ ì°¾ê¸°
                const suppliersSnapshot = await db.collection('suppliers').get();
                const supplier = suppliersSnapshot.docs.find(doc => doc.data().name === supplierName);

                if (!supplier) {
                    alert('ë“±ë¡ë˜ì§€ ì•Šì€ ê³µê¸‰ì‚¬ëª…ì…ë‹ˆë‹¤.\n\nê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”.');
                    return;
                }

                currentSupplier = { id: supplier.id, ...supplier.data() };
                currentSupplierId = supplier.id;

                // ë¡œê·¸ì¸ ì„±ê³µ
                sessionStorage.setItem('supplierPortalAuth', JSON.stringify(currentSupplier));
                document.getElementById('loginSection').style.display = 'none';
                document.getElementById('dashboard').classList.add('active');
                document.getElementById('navMenu').style.display = 'flex';
                document.getElementById('userInfo').style.display = 'flex';
                document.getElementById('displayName').textContent = currentSupplier.name;

                loadOrders();
            } catch (err) {
                console.error('ë¡œê·¸ì¸ ì˜¤ë¥˜:', err);
                alert('ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        function logout() {
            sessionStorage.removeItem('supplierPortalAuth');
            location.reload();
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì„¸ì…˜ í™•ì¸
        window.addEventListener('DOMContentLoaded', () => {
            const auth = sessionStorage.getItem('supplierPortalAuth');
            if (auth) {
                currentSupplier = JSON.parse(auth);
                currentSupplierId = currentSupplier.id;
                document.getElementById('loginSection').style.display = 'none';
                document.getElementById('dashboard').classList.add('active');
                document.getElementById('navMenu').style.display = 'flex';
                document.getElementById('userInfo').style.display = 'flex';
                document.getElementById('displayName').textContent = currentSupplier.name;
                loadOrders();
            }
        });

        async function loadOrders() {
            try {
                // ì¹´í˜24 ì£¼ë¬¸ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (supplier_nameìœ¼ë¡œ í•„í„°ë§)
                const ordersSnapshot = await db.collection('cafe24_orders')
                    .where('supplier_name', '==', currentSupplier.name)
                    .orderBy('order_date', 'desc')
                    .limit(1000)
                    .get();

                const orders = ordersSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));

                if (orders.length === 0) {
                    document.getElementById('emptyState').style.display = 'block';
                    return;
                }

                // í†µê³„ ê³„ì‚°
                const totalOrders = orders.length;
                const paidOrders = orders.filter(o => o.payment_status === 'F' || o.payment_status === 'ê²°ì œì™„ë£Œ').length;
                const pendingOrders = orders.filter(o => o.order_status === 'N10' || o.order_status === 'N20').length;
                const totalAmount = orders.reduce((sum, o) => sum + (Number(o.total_amount) || 0), 0);

                document.getElementById('totalOrders').textContent = formatNumber(totalOrders) + 'ê±´';
                document.getElementById('paidOrders').textContent = formatNumber(paidOrders) + 'ê±´';
                document.getElementById('pendingOrders').textContent = formatNumber(pendingOrders) + 'ê±´';
                document.getElementById('totalAmount').textContent = formatNumber(totalAmount) + 'ì›';

                // ë”œë³„ë¡œ ê·¸ë£¹í™”
                const dealGroups = {};
                orders.forEach(order => {
                    const dealId = order.deal_id || 'unmatched';
                    if (!dealGroups[dealId]) {
                        dealGroups[dealId] = {
                            dealTitle: order.deal_title || 'ë”œ ë¯¸ë§¤ì¹­',
                            orders: []
                        };
                    }
                    dealGroups[dealId].orders.push(order);
                });

                // ë”œë³„ ë Œë”ë§
                const dealGroupsEl = document.getElementById('dealGroups');
                dealGroupsEl.innerHTML = '';

                Object.entries(dealGroups).forEach(([dealId, group]) => {
                    const orderCount = group.orders.length;
                    const totalAmt = group.orders.reduce((sum, o) => sum + (Number(o.total_amount) || 0), 0);

                    const dealHtml = `
                        <div class="deal-group">
                            <div class="deal-header">
                                <div class="deal-title">${group.dealTitle}</div>
                                <div class="deal-stats">
                                    <span>ì£¼ë¬¸ ${orderCount}ê±´</span>
                                    <span>ê¸ˆì•¡ ${formatNumber(totalAmt)}ì›</span>
                                </div>
                            </div>
                            <div class="table-wrapper">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>ì£¼ë¬¸ë²ˆí˜¸</th>
                                            <th>ì£¼ë¬¸ì¼ì‹œ</th>
                                            <th>ìƒí’ˆëª…</th>
                                            <th>ìˆ˜ëŸ‰</th>
                                            <th>ê¸ˆì•¡</th>
                                            <th>ì£¼ë¬¸ìƒíƒœ</th>
                                            <th>ê²°ì œìƒíƒœ</th>
                                            <th>ìˆ˜ë ¹ì¸</th>
                                            <th>ì—°ë½ì²˜</th>
                                            <th>ë°°ì†¡ì§€</th>
                                            <th>íƒë°°ì‚¬</th>
                                            <th>ì†¡ì¥ë²ˆí˜¸</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${group.orders.map(order => `
                                            <tr>
                                                <td style="font-weight: 600; color: #3b82f6;">${order.order_id || '-'}</td>
                                                <td>${formatDate(order.order_date)}</td>
                                                <td style="text-align: left; max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${order.product_name || '-'}</td>
                                                <td>${order.quantity || 1}</td>
                                                <td style="font-weight: 600;">${formatNumber(order.total_amount)}ì›</td>
                                                <td>${getOrderStatusBadge(order.order_status)}</td>
                                                <td>${getPaymentStatusBadge(order.payment_status)}</td>
                                                <td>${order.buyer_name || '-'}</td>
                                                <td>${order.buyer_phone || '-'}</td>
                                                <td style="text-align: left; font-size: 12px;">${order.shipping_address || '-'}</td>
                                                <td>
                                                    <select class="carrier-select" id="carrier_${order.id}" onchange="updateShippingInfo('${order.id}')">
                                                        <option value="">íƒë°°ì‚¬ ì„ íƒ</option>
                                                        <optgroup label="ëŒ€í˜• íƒë°°ì‚¬">
                                                            <option value="CJëŒ€í•œí†µìš´" ${order.shipping_carrier === 'CJëŒ€í•œí†µìš´' ? 'selected' : ''}>CJëŒ€í•œí†µìš´</option>
                                                            <option value="ë¡¯ë°íƒë°°" ${order.shipping_carrier === 'ë¡¯ë°íƒë°°' ? 'selected' : ''}>ë¡¯ë°íƒë°°</option>
                                                            <option value="í•œì§„íƒë°°" ${order.shipping_carrier === 'í•œì§„íƒë°°' ? 'selected' : ''}>í•œì§„íƒë°°</option>
                                                            <option value="ë¡œì  íƒë°°" ${order.shipping_carrier === 'ë¡œì  íƒë°°' ? 'selected' : ''}>ë¡œì  íƒë°°</option>
                                                            <option value="ìš°ì²´êµ­íƒë°°" ${order.shipping_carrier === 'ìš°ì²´êµ­íƒë°°' ? 'selected' : ''}>ìš°ì²´êµ­íƒë°°</option>
                                                        </optgroup>
                                                        <optgroup label="ì¤‘Â·ì†Œí˜• íƒë°°ì‚¬">
                                                            <option value="ê²½ë™íƒë°°" ${order.shipping_carrier === 'ê²½ë™íƒë°°' ? 'selected' : ''}>ê²½ë™íƒë°°</option>
                                                            <option value="ëŒ€ì‹ íƒë°°" ${order.shipping_carrier === 'ëŒ€ì‹ íƒë°°' ? 'selected' : ''}>ëŒ€ì‹ íƒë°°</option>
                                                            <option value="í•©ë™íƒë°°" ${order.shipping_carrier === 'í•©ë™íƒë°°' ? 'selected' : ''}>í•©ë™íƒë°°</option>
                                                            <option value="ì¼ì–‘ë¡œì§€ìŠ¤" ${order.shipping_carrier === 'ì¼ì–‘ë¡œì§€ìŠ¤' ? 'selected' : ''}>ì¼ì–‘ë¡œì§€ìŠ¤</option>
                                                            <option value="ê±´ì˜íƒë°°" ${order.shipping_carrier === 'ê±´ì˜íƒë°°' ? 'selected' : ''}>ê±´ì˜íƒë°°</option>
                                                        </optgroup>
                                                        <optgroup label="í€µÂ·ë‹¹ì¼/íŠ¹ìˆ˜ ë°°ì†¡">
                                                            <option value="í•œì˜ì‚¬ë‘íƒë°°" ${order.shipping_carrier === 'í•œì˜ì‚¬ë‘íƒë°°' ? 'selected' : ''}>í•œì˜ì‚¬ë‘íƒë°°</option>
                                                            <option value="SLXíƒë°°" ${order.shipping_carrier === 'SLXíƒë°°' ? 'selected' : ''}>SLXíƒë°°</option>
                                                            <option value="ì²œì¼íƒë°°" ${order.shipping_carrier === 'ì²œì¼íƒë°°' ? 'selected' : ''}>ì²œì¼íƒë°°</option>
                                                            <option value="í€µì„œë¹„ìŠ¤" ${order.shipping_carrier === 'í€µì„œë¹„ìŠ¤' ? 'selected' : ''}>í€µì„œë¹„ìŠ¤(ê¸°íƒ€)</option>
                                                        </optgroup>
                                                        <optgroup label="í•´ì™¸/íŠ¹ì†¡">
                                                            <option value="EMS" ${order.shipping_carrier === 'EMS' ? 'selected' : ''}>EMS(ìš°ì²´êµ­)</option>
                                                            <option value="DHL" ${order.shipping_carrier === 'DHL' ? 'selected' : ''}>DHL</option>
                                                            <option value="FedEx" ${order.shipping_carrier === 'FedEx' ? 'selected' : ''}>FedEx</option>
                                                            <option value="UPS" ${order.shipping_carrier === 'UPS' ? 'selected' : ''}>UPS</option>
                                                        </optgroup>
                                                    </select>
                                                </td>
                                                <td>
                                                    <input type="text" class="tracking-input" id="tracking_${order.id}" placeholder="ì†¡ì¥ë²ˆí˜¸" value="${order.tracking_number || ''}" onchange="updateShippingInfo('${order.id}')">
                                                </td>
                                            </tr>
                                        `).join('')}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    `;
                    dealGroupsEl.insertAdjacentHTML('beforeend', dealHtml);
                });

            } catch (err) {
                console.error('ì£¼ë¬¸ ë¡œë”© ì˜¤ë¥˜:', err);
                alert('ì£¼ë¬¸ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }

        async function updateShippingInfo(orderId) {
            try {
                const carrier = document.getElementById(`carrier_${orderId}`)?.value || '';
                const trackingNumber = document.getElementById(`tracking_${orderId}`)?.value || '';

                if (!carrier && !trackingNumber) {
                    return; // ë‘˜ ë‹¤ ë¹„ì–´ìˆìœ¼ë©´ ì €ì¥ ì•ˆ í•¨
                }

                const updateData = {
                    shipping_updated_at: new Date().toISOString()
                };

                if (carrier) updateData.shipping_carrier = carrier;
                if (trackingNumber) updateData.tracking_number = trackingNumber;

                await db.collection('cafe24_orders').doc(orderId).update(updateData);

                let message = '';
                if (carrier && trackingNumber) {
                    message = `íƒë°°ì‚¬: ${carrier}\nì†¡ì¥ë²ˆí˜¸: ${trackingNumber}\n\nì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.`;
                } else if (carrier) {
                    message = `íƒë°°ì‚¬: ${carrier}\nì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.`;
                } else {
                    message = `ì†¡ì¥ë²ˆí˜¸: ${trackingNumber}\nì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.`;
                }

                alert(message);
            } catch (err) {
                console.error('ë°°ì†¡ ì •ë³´ ì €ì¥ ì˜¤ë¥˜:', err);
                alert('ë°°ì†¡ ì •ë³´ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }

        function formatNumber(num) {
            return (num || 0).toLocaleString();
        }

        function formatDate(dateStr) {
            if (!dateStr) return '-';
            return dateStr.replace('T', ' ').substring(0, 16);
        }

        function getOrderStatusBadge(status) {
            const statusMap = {
                'N00': { text: 'ì…ê¸ˆì „', color: 'gray' },
                'N10': { text: 'ê²°ì œì™„ë£Œ', color: 'info' },
                'N20': { text: 'ìƒí’ˆì¤€ë¹„ì¤‘', color: 'warning' },
                'N21': { text: 'ë°°ì†¡ëŒ€ê¸°', color: 'warning' },
                'N22': { text: 'ë°°ì†¡ì¤‘', color: 'success' },
                'N30': { text: 'ë°°ì†¡ì™„ë£Œ', color: 'success' },
                'C00': { text: 'ì·¨ì†Œì‹ ì²­', color: 'danger' },
                'C10': { text: 'ì·¨ì†Œì²˜ë¦¬ì¤‘', color: 'danger' },
                'C20': { text: 'ì·¨ì†Œì™„ë£Œ', color: 'gray' },
            };
            const info = statusMap[status] || { text: status || 'ì•Œ ìˆ˜ ì—†ìŒ', color: 'gray' };
            return `<span class="badge badge-${info.color}">${info.text}</span>`;
        }

        function getPaymentStatusBadge(status) {
            if (status === 'F' || status === 'ê²°ì œì™„ë£Œ') {
                return '<span class="badge badge-success">ê²°ì œì™„ë£Œ</span>';
            }
            return '<span class="badge badge-gray">ë¯¸ê²°ì œ</span>';
        }
    </script>
</body>
</html>
