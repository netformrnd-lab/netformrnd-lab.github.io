<!DOCTYPE html>
<html lang="ko">
<head>
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì œì•ˆì„œ ê´€ë¦¬ NEW - ëª¨ì—¬ë¼ë”œ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #f5f5f5; font-family: 'Noto Sans KR', sans-serif; min-height: 100vh; }

        .header { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); padding: 16px 24px; color: #fff; }
        .header-inner { max-width: 1400px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; }
        .logo { font-size: 18px; font-weight: 700; text-decoration: none; color: #fff; display: flex; align-items: center; gap: 8px; }
        .nav-menu { display: flex; gap: 4px; }
        .nav-item { padding: 8px 16px; border-radius: 8px; text-decoration: none; color: rgba(255,255,255,0.9); font-size: 14px; font-weight: 500; transition: all 0.2s; }
        .nav-item:hover { background: rgba(255,255,255,0.15); }
        .nav-item.active { background: rgba(255,255,255,0.25); color: #fff; font-weight: 600; }

        .container { max-width: 1400px; margin: 0 auto; padding: 40px 24px; }

        .page-header { margin-bottom: 40px; }
        .page-title { font-size: 32px; font-weight: 700; color: #374151; margin-bottom: 12px; }
        .page-desc { font-size: 16px; color: #6b7280; line-height: 1.6; }

        .category-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 24px; margin-bottom: 48px; }

        .category-card { background: #fff; border-radius: 16px; padding: 32px; box-shadow: 0 2px 8px rgba(0,0,0,0.04); border: 2px solid transparent; transition: all 0.3s; cursor: pointer; }
        .category-card:hover { border-color: #f59e0b; box-shadow: 0 8px 24px rgba(245,158,11,0.15); transform: translateY(-4px); }

        .category-icon { font-size: 48px; margin-bottom: 16px; }
        .category-name { font-size: 20px; font-weight: 700; color: #111; margin-bottom: 8px; }
        .category-desc { font-size: 14px; color: #6b7280; line-height: 1.6; margin-bottom: 16px; min-height: 64px; }
        .category-tags { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 20px; }
        .category-tag { display: inline-block; padding: 4px 12px; background: #fef3c7; color: #92400e; font-size: 12px; font-weight: 600; border-radius: 12px; }

        .btn-download { width: 100%; padding: 12px; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: #fff; border: none; border-radius: 8px; font-size: 15px; font-weight: 600; cursor: pointer; transition: all 0.2s; }
        .btn-download:hover { background: linear-gradient(135deg, #d97706 0%, #b45309 100%); }

        .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; padding-bottom: 16px; border-bottom: 3px solid #f59e0b; }
        .section-title { font-size: 24px; font-weight: 700; color: #111; }
        .section-badge { background: #fef3c7; color: #92400e; padding: 6px 16px; border-radius: 20px; font-size: 13px; font-weight: 600; }

        .coming-soon { opacity: 0.6; pointer-events: none; }
        .coming-soon-badge { background: #e5e7eb; color: #6b7280; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; display: inline-block; margin-top: 8px; }

        .info-box { background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%); border: 2px solid #f59e0b; border-radius: 16px; padding: 24px; margin-bottom: 40px; }
        .info-box-title { font-size: 18px; font-weight: 700; color: #92400e; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
        .info-box-content { font-size: 14px; color: #78350f; line-height: 1.8; }
        .info-box-content ul { padding-left: 20px; margin-top: 8px; }
        .info-box-content li { margin-bottom: 4px; }

        /* í‘œì¤€ ì œì•ˆì„œ ë°°ì§€ */
        .standard-badge {
            position: absolute;
            top: 16px;
            right: 16px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: #fff;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        /* ì¹´í…Œê³ ë¦¬ ì¹´ë“œ í¬ì§€ì…˜ */
        .category-card { position: relative; }

        /* ë²„íŠ¼ ê·¸ë£¹ */
        .button-group { display: flex; gap: 8px; margin-top: 12px; }
        .btn-primary {
            flex: 1;
            padding: 12px;
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: #fff;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        .btn-primary:hover { background: linear-gradient(135deg, #d97706 0%, #b45309 100%); }

        .btn-secondary {
            flex: 1;
            padding: 12px;
            background: #fff;
            color: #f59e0b;
            border: 2px solid #f59e0b;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        .btn-secondary:hover { background: #fffbeb; }

        .btn-small {
            padding: 8px 16px;
            font-size: 13px;
            border-radius: 6px;
        }

        /* íŒŒìƒë³¸ ì„¹ì…˜ */
        .derivatives-section {
            background: #fff;
            border-radius: 16px;
            padding: 24px;
            margin-top: 16px;
            border: 2px solid #e5e7eb;
        }
        .derivatives-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 2px solid #f3f4f6;
        }
        .derivatives-title { font-size: 16px; font-weight: 700; color: #374151; }
        .derivative-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background: #f9fafb;
            border-radius: 8px;
            margin-bottom: 8px;
            border: 1px solid #e5e7eb;
        }
        .derivative-item:hover { background: #f3f4f6; }
        .derivative-name { font-size: 14px; font-weight: 600; color: #111; }
        .derivative-date { font-size: 12px; color: #6b7280; margin-top: 4px; }
        .derivative-actions { display: flex; gap: 8px; }
        .btn-icon {
            padding: 6px 12px;
            background: #fff;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .btn-icon:hover { background: #f9fafb; border-color: #f59e0b; color: #f59e0b; }

        /* ëª¨ë‹¬ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        .modal.active { display: flex; }
        .modal-content {
            background: #fff;
            border-radius: 16px;
            padding: 32px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        .modal-header {
            font-size: 24px;
            font-weight: 700;
            color: #111;
            margin-bottom: 20px;
        }
        .modal-body { margin-bottom: 24px; }
        .modal-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 8px;
        }
        .modal-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 15px;
            font-family: 'Noto Sans KR', sans-serif;
        }
        .modal-input:focus {
            outline: none;
            border-color: #f59e0b;
        }
        .modal-footer {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }
        .btn-modal {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        .btn-modal-cancel {
            background: #e5e7eb;
            color: #374151;
        }
        .btn-modal-cancel:hover { background: #d1d5db; }
        .btn-modal-confirm {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: #fff;
        }
        .btn-modal-confirm:hover { background: linear-gradient(135deg, #d97706 0%, #b45309 100%); }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-inner">
            <a href="/" class="logo">
                <span>â˜€ï¸ëª¨ì—¬ë¼ë”œ</span>
            </a>
            <div class="nav-menu">
                <a href="portal.html" class="nav-item">ì •ì‚°ì„œ</a>
                <a href="orders.html" class="nav-item">ì£¼ë¬¸í˜„í™©</a>
                <a href="proposal-manager.html" class="nav-item active">ì œì•ˆì„œ NEW</a>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="page-header">
            <h1 class="page-title">ğŸ“‘ ë§ì¶¤ ì œì•ˆì„œ ë‹¤ìš´ë¡œë“œ <span style="color: #f59e0b;">NEW</span></h1>
            <p class="page-desc">ê·€ì‚¬ì˜ ì œí’ˆ ì¹´í…Œê³ ë¦¬ì— ìµœì í™”ëœ ì œì•ˆì„œë¥¼ ë‹¤ìš´ë¡œë“œí•˜ì„¸ìš”.<br>ê° ì¹´í…Œê³ ë¦¬ë³„ë¡œ íŠ¹í™”ëœ ê°•ì ê³¼ ë°ì´í„°ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
        </div>

        <div class="info-box">
            <div class="info-box-title">
                ğŸ’¡ ì œì•ˆì„œ í™œìš© ê°€ì´ë“œ
            </div>
            <div class="info-box-content">
                <strong>ì œì•ˆì„œëŠ” ì´ë ‡ê²Œ í™œìš©í•˜ì„¸ìš”:</strong>
                <ul>
                    <li><strong>ì´ë©”ì¼ ë°œì†¡:</strong> ë‹¤ìš´ë¡œë“œ í›„ Ctrl+P â†’ PDFë¡œ ì €ì¥í•˜ì—¬ ì´ë©”ì¼ ì²¨ë¶€</li>
                    <li><strong>ì¸ì‡„ìš©:</strong> ë¯¸íŒ… ìë£Œë¡œ í™œìš© (A4 ë¹„ìœ¨ ìµœì í™”)</li>
                    <li><strong>ì¹´ì¹´ì˜¤í†¡/ë¬¸ì:</strong> ì´ë¯¸ì§€ë¡œ ì €ì¥í•˜ì—¬ ì „ì†¡</li>
                    <li><strong>SNS ê³µìœ :</strong> ë¸Œëœë“œ í™ë³´ìš©ìœ¼ë¡œë„ í™œìš© ê°€ëŠ¥</li>
                </ul>
            </div>
        </div>

        <div class="section-header">
            <h2 class="section-title">ğŸ¯ ì œí’ˆ ì¹´í…Œê³ ë¦¬ë³„</h2>
            <span class="section-badge">ìš°ì„  ì œê³µ</span>
        </div>

        <div class="category-grid">
            <!-- ì‹í’ˆ/ìŒë£Œ -->
            <div class="category-card" data-category="food" data-url="category/email-proposal-food.html">
                <div class="category-icon">ğŸ½ï¸</div>
                <h3 class="category-name">ì‹í’ˆ/ìŒë£Œ</h3>
                <p class="category-desc">ê°€ê³µì‹í’ˆ, ìŒë£Œ, ê±´ê°•ì‹, ê°„í¸ì‹ ë“±<br>ë§› ì²´í—˜ ì¤‘ì‹¬ì˜ ëŒ€ëŸ‰ êµ¬ë§¤ íš¨ê³¼ ê°•ì¡°</p>
                <div class="category-tags">
                    <span class="category-tag">ë§› ì²´í—˜</span>
                    <span class="category-tag">ë‹¨ê°€ ì ˆê°</span>
                    <span class="category-tag">ì‹œì¦Œ ëŒ€ì‘</span>
                </div>
                <div class="button-group">
                    <button class="btn-primary" onclick="openProposal(event, 'category/email-proposal-food.html')">ì œì•ˆì„œ ì—´ê¸° â†’</button>
                    <button class="btn-secondary btn-small" onclick="setAsStandard(event, 'food')">í‘œì¤€ ì„¤ì •</button>
                </div>
                <button id="editBaseBtn-food" class="btn-secondary" style="display: none; width: 100%; margin-top: 8px;" onclick="openHtmlEditorModal(event, 'food')">ğŸ”§ ê¸°ë³¸ ì œì•ˆì„œ í¸ì§‘</button>
                <div id="derivatives-food" class="derivatives-section" style="display: none;"></div>
            </div>

            <!-- ë·°í‹°/í™”ì¥í’ˆ -->
            <div class="category-card coming-soon">
                <div class="category-icon">ğŸ’„</div>
                <h3 class="category-name">ë·°í‹°/í™”ì¥í’ˆ</h3>
                <p class="category-desc">í™”ì¥í’ˆ, ìŠ¤í‚¨ì¼€ì–´, ë©”ì´í¬ì—… ë¸Œëœë“œ<br>ì²´í—˜ë‹¨ íš¨ê³¼ ê·¹ëŒ€í™”, ë·°í‹° ì¸í”Œë£¨ì–¸ì„œ ë§¤ì¹­</p>
                <div class="category-tags">
                    <span class="category-tag">ì²´í—˜ë‹¨</span>
                    <span class="category-tag">ì‚¬ìš© í›„ê¸°</span>
                    <span class="category-tag">íŠ¸ë Œë“œ</span>
                </div>
                <span class="coming-soon-badge">ê³§ ê³µê°œ</span>
            </div>

            <!-- ê±´ê°•ì‹í’ˆ/ì˜ì–‘ì œ -->
            <div class="category-card coming-soon">
                <div class="category-icon">ğŸ’Š</div>
                <h3 class="category-name">ê±´ê°•ì‹í’ˆ/ì˜ì–‘ì œ</h3>
                <p class="category-desc">ê±´ê°•ê¸°ëŠ¥ì‹í’ˆ, ì˜ì–‘ì œ, ë‹¤ì´ì–´íŠ¸ ì œí’ˆ<br>ì¥ê¸° ì²´í—˜ í”„ë¡œê·¸ë¨, ì¬êµ¬ë§¤ìœ¨ ë°ì´í„° ê°•ì¡°</p>
                <div class="category-tags">
                    <span class="category-tag">íš¨ê³¼ ê²€ì¦</span>
                    <span class="category-tag">ì¬êµ¬ë§¤ìœ¨</span>
                    <span class="category-tag">ê±´ê°• ê´€ì‹¬ì¸µ</span>
                </div>
                <span class="coming-soon-badge">ê³§ ê³µê°œ</span>
            </div>

            <!-- ìƒí™œìš©í’ˆ/í™ˆì¼€ì–´ -->
            <div class="category-card coming-soon">
                <div class="category-icon">ğŸ§¹</div>
                <h3 class="category-name">ìƒí™œìš©í’ˆ/í™ˆì¼€ì–´</h3>
                <p class="category-desc">ì„¸ì œ, ì²­ì†Œìš©í’ˆ, ë°©í–¥ì œ, ìˆ˜ë‚©ìš©í’ˆ<br>ì‹¤ìš©ì„± ì¤‘ì‹¬ í›„ê¸°, ê°€ì„±ë¹„ ê°•ì¡°</p>
                <div class="category-tags">
                    <span class="category-tag">ì‹¤ìš©ì„±</span>
                    <span class="category-tag">ê°€ì„±ë¹„</span>
                    <span class="category-tag">ì •ê¸° êµ¬ë…</span>
                </div>
                <span class="coming-soon-badge">ê³§ ê³µê°œ</span>
            </div>

            <!-- ê°€ì „/ë””ì§€í„¸ -->
            <div class="category-card coming-soon">
                <div class="category-icon">ğŸ’»</div>
                <h3 class="category-name">ê°€ì „/ë””ì§€í„¸</h3>
                <p class="category-desc">ì†Œí˜•ê°€ì „, ITê¸°ê¸°, ì•¡ì„¸ì„œë¦¬<br>ê³ ê°€ ì œí’ˆ ì²´í—˜ë‹¨ íš¨ê³¼, ìƒì„¸ ì‚¬ìš© í›„ê¸°</p>
                <div class="category-tags">
                    <span class="category-tag">ê³ ê°€ ì œí’ˆ</span>
                    <span class="category-tag">ìƒì„¸ í›„ê¸°</span>
                    <span class="category-tag">ê¸°ìˆ  ì´í•´</span>
                </div>
                <span class="coming-soon-badge">ê³§ ê³µê°œ</span>
            </div>

            <!-- íŒ¨ì…˜/ì¡í™” -->
            <div class="category-card coming-soon">
                <div class="category-icon">ğŸ‘—</div>
                <h3 class="category-name">íŒ¨ì…˜/ì¡í™”</h3>
                <p class="category-desc">ì˜ë¥˜, ê°€ë°©, ì•¡ì„¸ì„œë¦¬, ì‹ ë°œ<br>ì‹œê°ì  ì½˜í…ì¸  ê°•ì , ìŠ¤íƒ€ì¼ë§ ì œì•ˆ</p>
                <div class="category-tags">
                    <span class="category-tag">ë¹„ì£¼ì–¼</span>
                    <span class="category-tag">ìŠ¤íƒ€ì¼ë§</span>
                    <span class="category-tag">ì‹œì¦Œ íŠ¸ë Œë“œ</span>
                </div>
                <span class="coming-soon-badge">ê³§ ê³µê°œ</span>
            </div>

            <!-- ìœ¡ì•„/í‚¤ì¦ˆ -->
            <div class="category-card" data-category="baby" data-url="category/email-proposal-baby.html">
                <div class="category-icon">ğŸ‘¶</div>
                <h3 class="category-name">ìœ¡ì•„/í‚¤ì¦ˆ</h3>
                <p class="category-desc">ìœ ì•„ìš©í’ˆ, ì¥ë‚œê°, ìœ¡ì•„ìš©í’ˆ<br>ì—„ë§ˆ ì»¤ë®¤ë‹ˆí‹° íŒŒì›Œ, ì•ˆì „ì„± í›„ê¸° ì¤‘ìš”</p>
                <div class="category-tags">
                    <span class="category-tag">ì—„ë§ˆ ì»¤ë®¤ë‹ˆí‹°</span>
                    <span class="category-tag">ì•ˆì „ì„±</span>
                    <span class="category-tag">ì¬êµ¬ë§¤</span>
                </div>
                <div class="button-group">
                    <button class="btn-primary" onclick="openProposal(event, 'category/email-proposal-baby.html')">ì œì•ˆì„œ ì—´ê¸° â†’</button>
                    <button class="btn-secondary btn-small" onclick="setAsStandard(event, 'baby')">í‘œì¤€ ì„¤ì •</button>
                </div>
                <button id="editBaseBtn-baby" class="btn-secondary" style="display: none; width: 100%; margin-top: 8px;" onclick="openHtmlEditorModal(event, 'baby')">ğŸ”§ ê¸°ë³¸ ì œì•ˆì„œ í¸ì§‘</button>
                <div id="derivatives-baby" class="derivatives-section" style="display: none;"></div>
            </div>

            <!-- ë°˜ë ¤ë™ë¬¼ -->
            <div class="category-card coming-soon">
                <div class="category-icon">ğŸ¾</div>
                <h3 class="category-name">ë°˜ë ¤ë™ë¬¼</h3>
                <p class="category-desc">ë°˜ë ¤ë™ë¬¼ ìš©í’ˆ, ì‚¬ë£Œ, ê°„ì‹<br>í« ì¸í”Œë£¨ì–¸ì„œ í™œìš©, ë°˜ë ¤ì¸ ì»¤ë®¤ë‹ˆí‹° ê°•ì„¸</p>
                <div class="category-tags">
                    <span class="category-tag">í« ì¸í”Œë£¨ì–¸ì„œ</span>
                    <span class="category-tag">ì»¤ë®¤ë‹ˆí‹°</span>
                    <span class="category-tag">ì •ê¸° êµ¬ë§¤</span>
                </div>
                <span class="coming-soon-badge">ê³§ ê³µê°œ</span>
            </div>
        </div>

        <div class="section-header">
            <h2 class="section-title">ğŸ¢ ê³µê¸‰ì‚¬ ê·œëª¨ë³„</h2>
            <span class="section-badge" style="background: #e5e7eb; color: #6b7280;">ì¶”í›„ ê³µê°œ</span>
        </div>
        <div class="category-grid">
            <div class="category-card coming-soon">
                <div class="category-icon">ğŸ›ï¸</div>
                <h3 class="category-name">ëŒ€ê¸°ì—…/ì¤‘ê²¬ê¸°ì—…</h3>
                <p class="category-desc">ë°ì´í„° ë¶„ì„, ROI, ë¸Œëœë“œ ê´€ë¦¬<br>ê·œëª¨ ìˆëŠ” í˜‘ì—… ê°•ì¡°</p>
                <span class="coming-soon-badge">ì¤€ë¹„ ì¤‘</span>
            </div>
            <div class="category-card coming-soon">
                <div class="category-icon">ğŸš€</div>
                <h3 class="category-name">ìŠ¤íƒ€íŠ¸ì—…/ì†Œìƒê³µì¸</h3>
                <p class="category-desc">ë¦¬ìŠ¤í¬ ì œë¡œ, ì´ˆê¸°ë¹„ìš© ë¶€ë‹´ ì—†ìŒ<br>ì„±ì¥ ì§€ì› í”„ë¡œê·¸ë¨ ê°•ì¡°</p>
                <span class="coming-soon-badge">ì¤€ë¹„ ì¤‘</span>
            </div>
        </div>

        <div class="section-header">
            <h2 class="section-title">ğŸ¯ ëª©ì ë³„</h2>
            <span class="section-badge" style="background: #e5e7eb; color: #6b7280;">ì¶”í›„ ê³µê°œ</span>
        </div>
        <div class="category-grid">
            <div class="category-card coming-soon">
                <div class="category-icon">ğŸ‰</div>
                <h3 class="category-name">ì‹ ì œí’ˆ ë¡ ì¹­</h3>
                <p class="category-desc">í…ŒìŠ¤íŠ¸ ë§ˆì¼“, ì‹œì¥ ë°˜ì‘ í™•ì¸<br>í”¼ë“œë°± ìˆ˜ì§‘ ê°•ì¡°</p>
                <span class="coming-soon-badge">ì¤€ë¹„ ì¤‘</span>
            </div>
            <div class="category-card coming-soon">
                <div class="category-icon">ğŸ“¦</div>
                <h3 class="category-name">ì¬ê³  ì†Œì§„</h3>
                <p class="category-desc">ë¹ ë¥¸ ë¬¼ëŸ‰ ì²˜ë¦¬, í• ì¸ ê³µêµ¬ íš¨ê³¼<br>ì‹ ì† ì •ì‚° ê°•ì¡°</p>
                <span class="coming-soon-badge">ì¤€ë¹„ ì¤‘</span>
            </div>
            <div class="category-card coming-soon">
                <div class="category-icon">ğŸ“¢</div>
                <h3 class="category-name">ë¸Œëœë“œ ì¸ì§€ë„ í™•ëŒ€</h3>
                <p class="category-desc">SNS í™•ì‚°, ì…ì†Œë¬¸ íš¨ê³¼<br>ì½˜í…ì¸  2ì°¨ í™œìš© ê°•ì¡°</p>
                <span class="coming-soon-badge">ì¤€ë¹„ ì¤‘</span>
            </div>
        </div>
    </div>

    <!-- íŒŒìƒë³¸ ìƒì„± ëª¨ë‹¬ -->
    <div id="derivativeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">ğŸ“ íŒŒìƒ ì œì•ˆì„œ ìƒì„±</div>
            <div class="modal-body">
                <label class="modal-label">ì œì•ˆì„œ ì´ë¦„</label>
                <input type="text" id="derivativeName" class="modal-input" placeholder="ì˜ˆ: Aì‚¬ ë§ì¶¤ ì œì•ˆì„œ, 2024ë…„ ìƒë°˜ê¸° ë²„ì „">
                <div style="margin-top: 12px; font-size: 13px; color: #6b7280;">
                    ğŸ’¡ í‘œì¤€ ì œì•ˆì„œì˜ HTML ì „ì²´ë¥¼ ë³µì‚¬í•˜ì—¬ ë…ë¦½ì ìœ¼ë¡œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-modal btn-modal-cancel" onclick="closeDerivativeModal()">ì·¨ì†Œ</button>
                <button class="btn-modal btn-modal-confirm" onclick="createDerivative()">ìƒì„±í•˜ê¸°</button>
            </div>
        </div>
    </div>

    <!-- ê¸°ë³¸ ì œì•ˆì„œ HTML í¸ì§‘ ëª¨ë‹¬ -->
    <div id="htmlEditorModal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">ğŸ”§ ê¸°ë³¸ ì œì•ˆì„œ HTML í¸ì§‘</div>
            <div class="modal-body">
                <div style="margin-bottom: 12px; padding: 12px; background: #fffbeb; border: 2px solid #f59e0b; border-radius: 8px;">
                    <div style="font-size: 13px; color: #92400e; line-height: 1.6;">
                        âš ï¸ <strong>ì£¼ì˜:</strong> ê¸°ë³¸ ì œì•ˆì„œë¥¼ ë³€ê²½í•˜ë©´ <strong>ìƒˆë¡œ ìƒì„±ë˜ëŠ” íŒŒìƒë³¸</strong>ì—ë§Œ ì ìš©ë©ë‹ˆë‹¤.<br>
                        ê¸°ì¡´ íŒŒìƒë³¸ì€ ì˜í–¥ë°›ì§€ ì•ŠìŠµë‹ˆë‹¤. ë³€ê²½ í›„ ë°˜ë“œì‹œ "ëŒ€í‘œ ì„¤ì •"ì„ ëˆŒëŸ¬ ìµœì¢… í™•ì •í•˜ì„¸ìš”.
                    </div>
                </div>
                <label class="modal-label">HTML ì½”ë“œ</label>
                <textarea id="htmlEditor" style="width: 100%; height: 400px; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-family: monospace; font-size: 13px; resize: vertical;"></textarea>
                <div style="margin-top: 12px; font-size: 13px; color: #6b7280;">
                    ğŸ’¡ HTML ì „ì²´ë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”. ë³€ê²½ í›„ ë°˜ë“œì‹œ "ëŒ€í‘œ ì„¤ì •" ë²„íŠ¼ì„ ëˆŒëŸ¬ì•¼ ì ìš©ë©ë‹ˆë‹¤.
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-modal btn-modal-cancel" onclick="closeHtmlEditorModal()">ì·¨ì†Œ</button>
                <button class="btn-modal btn-modal-confirm" onclick="saveBaseHtml()">ì„ì‹œ ì €ì¥</button>
            </div>
        </div>
    </div>

    <script>
        let currentCategory = null;

        // ì œì•ˆì„œ ì—´ê¸°
        function openProposal(event, url) {
            event.stopPropagation();
            window.open(url, '_blank');
        }

        // í‘œì¤€ ì œì•ˆì„œë¡œ ì„¤ì • (ë½ì¸ ê¸°ëŠ¥ í¬í•¨)
        function setAsStandard(event, category) {
            event.stopPropagation();

            // ê¸°ë³¸ ì œì•ˆì„œ HTMLì´ ìˆìœ¼ë©´ ë½ì¸ ì²˜ë¦¬
            const hasBaseHtml = localStorage.getItem(`base_proposal_${category}`);
            if (hasBaseHtml) {
                const isLocked = localStorage.getItem(`base_proposal_${category}_locked`) === 'true';
                if (!isLocked) {
                    localStorage.setItem(`base_proposal_${category}_locked`, 'true');
                    alert('ğŸ”’ ê¸°ë³¸ ì œì•ˆì„œê°€ ìµœì¢… í™•ì •ë˜ì—ˆìŠµë‹ˆë‹¤!\nì´ì œ ìƒˆë¡œ ìƒì„±ë˜ëŠ” íŒŒìƒë³¸ì— ì´ HTMLì´ ì ìš©ë©ë‹ˆë‹¤.');
                }
            }

            // ê¸°ì¡´ í‘œì¤€ ë°°ì§€ ì œê±°
            document.querySelectorAll('.standard-badge').forEach(badge => badge.remove());

            // localStorageì— ì €ì¥
            localStorage.setItem('standardProposal', category);

            // ìƒˆ ë°°ì§€ ì¶”ê°€
            const card = document.querySelector(`[data-category="${category}"]`);
            const badge = document.createElement('div');
            badge.className = 'standard-badge';
            badge.textContent = 'â­ í‘œì¤€';
            card.insertBefore(badge, card.firstChild);

            // ê¸°ë³¸ ì œì•ˆì„œ í¸ì§‘ ë²„íŠ¼ í‘œì‹œ
            const editBtn = document.getElementById(`editBaseBtn-${category}`);
            if (editBtn) {
                editBtn.style.display = 'block';
            }

            // íŒŒìƒë³¸ ì„¹ì…˜ í‘œì‹œ
            showDerivativesSection(category);

            if (!hasBaseHtml) {
                alert('âœ… í‘œì¤€ ì œì•ˆì„œë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤!');
            }
        }

        // HTML í¸ì§‘ ëª¨ë‹¬ ì—´ê¸°
        async function openHtmlEditorModal(event, category) {
            event.stopPropagation();
            currentCategory = category;

            // ê¸°ì¡´ì— ì €ì¥ëœ HTMLì´ ìˆìœ¼ë©´ ë¶ˆëŸ¬ì˜¤ê¸°, ì—†ìœ¼ë©´ ì›ë³¸ HTML ë¶ˆëŸ¬ì˜¤ê¸°
            let html = localStorage.getItem(`base_proposal_${category}`);

            if (!html) {
                // ì›ë³¸ HTML íŒŒì¼ ê°€ì ¸ì˜¤ê¸°
                const url = document.querySelector(`[data-category="${category}"]`).dataset.url;
                try {
                    const response = await fetch(url);
                    html = await response.text();
                } catch (error) {
                    alert('âŒ HTML íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                    return;
                }
            }

            // ì—ë””í„°ì— HTML ë¡œë“œ
            document.getElementById('htmlEditor').value = html;
            document.getElementById('htmlEditorModal').classList.add('active');
        }

        // HTML í¸ì§‘ ëª¨ë‹¬ ë‹«ê¸°
        function closeHtmlEditorModal() {
            document.getElementById('htmlEditorModal').classList.remove('active');
            currentCategory = null;
        }

        // ê¸°ë³¸ ì œì•ˆì„œ HTML ì„ì‹œ ì €ì¥
        function saveBaseHtml() {
            const html = document.getElementById('htmlEditor').value;

            if (!html.trim()) {
                alert('âŒ HTML ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ì„ì‹œ ì €ì¥ (ë½ í•´ì œ ìƒíƒœë¡œ)
            localStorage.setItem(`base_proposal_${currentCategory}`, html);
            localStorage.setItem(`base_proposal_${currentCategory}_locked`, 'false');

            closeHtmlEditorModal();
            alert('âœ… ì„ì‹œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!\n\në°˜ë“œì‹œ "í‘œì¤€ ì„¤ì •" ë²„íŠ¼ì„ ëˆŒëŸ¬ ìµœì¢… í™•ì •í•˜ì„¸ìš”.\ní™•ì • í›„ ìƒˆë¡œ ìƒì„±ë˜ëŠ” íŒŒìƒë³¸ì— ì´ HTMLì´ ì ìš©ë©ë‹ˆë‹¤.');
        }

        // íŒŒìƒë³¸ ì„¹ì…˜ í‘œì‹œ
        function showDerivativesSection(category) {
            const section = document.getElementById(`derivatives-${category}`);
            if (!section) return;

            section.style.display = 'block';
            updateDerivativesSection(category);
        }

        // íŒŒìƒë³¸ ì„¹ì…˜ ì—…ë°ì´íŠ¸
        function updateDerivativesSection(category) {
            const section = document.getElementById(`derivatives-${category}`);
            if (!section) return;

            const derivatives = getDerivatives(category);

            let html = `
                <div class="derivatives-header">
                    <div class="derivatives-title">ğŸ“‚ íŒŒìƒ ì œì•ˆì„œ (${derivatives.length})</div>
                    <button class="btn-secondary btn-small" onclick="openDerivativeModal('${category}')">+ ìƒˆë¡œ ë§Œë“¤ê¸°</button>
                </div>
            `;

            if (derivatives.length === 0) {
                html += `<div style="text-align: center; padding: 20px; color: #9ca3af; font-size: 14px;">
                    ì•„ì§ íŒŒìƒ ì œì•ˆì„œê°€ ì—†ìŠµë‹ˆë‹¤.<br>í‘œì¤€ ì œì•ˆì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë§ì¶¤ ë²„ì „ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”.
                </div>`;
            } else {
                derivatives.forEach(der => {
                    html += `
                        <div class="derivative-item">
                            <div>
                                <div class="derivative-name">${der.name}</div>
                                <div class="derivative-date">ìƒì„±: ${der.date}</div>
                            </div>
                            <div class="derivative-actions">
                                <button class="btn-icon" onclick="openDerivative('${category}', '${der.id}')">ì—´ê¸°</button>
                                <button class="btn-icon" onclick="editDerivativeName('${category}', '${der.id}')">ì´ë¦„ ìˆ˜ì •</button>
                                <button class="btn-icon" onclick="deleteDerivative('${category}', '${der.id}')" style="color: #dc2626;">ì‚­ì œ</button>
                            </div>
                        </div>
                    `;
                });
            }

            section.innerHTML = html;
        }

        // íŒŒìƒë³¸ ê°€ì ¸ì˜¤ê¸°
        function getDerivatives(category) {
            const key = `derivatives_${category}`;
            const data = localStorage.getItem(key);
            return data ? JSON.parse(data) : [];
        }

        // íŒŒìƒë³¸ ì €ì¥
        function saveDerivatives(category, derivatives) {
            const key = `derivatives_${category}`;
            localStorage.setItem(key, JSON.stringify(derivatives));
        }

        // íŒŒìƒë³¸ ìƒì„± ëª¨ë‹¬ ì—´ê¸°
        function openDerivativeModal(category) {
            currentCategory = category;
            document.getElementById('derivativeModal').classList.add('active');
            document.getElementById('derivativeName').value = '';
            document.getElementById('derivativeName').focus();
        }

        // íŒŒìƒë³¸ ìƒì„± ëª¨ë‹¬ ë‹«ê¸°
        function closeDerivativeModal() {
            document.getElementById('derivativeModal').classList.remove('active');
            currentCategory = null;
        }

        // íŒŒìƒë³¸ ìƒì„± (ì „ì²´ HTML ë³µì‚¬)
        async function createDerivative() {
            const name = document.getElementById('derivativeName').value.trim();

            if (!name) {
                alert('ì œì•ˆì„œ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ê¸°ë³¸ ì œì•ˆì„œ HTML ê°€ì ¸ì˜¤ê¸° (ë½ì¸ëœ ë²„ì „ ë˜ëŠ” ì›ë³¸)
            let baseHtml = localStorage.getItem(`base_proposal_${currentCategory}`);

            if (!baseHtml) {
                // ì›ë³¸ HTML íŒŒì¼ì—ì„œ ê°€ì ¸ì˜¤ê¸°
                const url = document.querySelector(`[data-category="${currentCategory}"]`).dataset.url;
                try {
                    const response = await fetch(url);
                    baseHtml = await response.text();
                } catch (error) {
                    alert('âŒ ê¸°ë³¸ ì œì•ˆì„œ HTMLì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                    return;
                }
            }

            // ìƒˆ íŒŒìƒë³¸ ìƒì„±
            const derivativeId = Date.now().toString();
            const derivatives = getDerivatives(currentCategory);
            const newDerivative = {
                id: derivativeId,
                name: name,
                date: new Date().toLocaleDateString('ko-KR'),
                url: document.querySelector(`[data-category="${currentCategory}"]`).dataset.url
            };

            // ì „ì²´ HTMLì„ íŒŒìƒë³¸ì— ì €ì¥
            localStorage.setItem(`derivative_html_${currentCategory}_${derivativeId}`, baseHtml);

            derivatives.push(newDerivative);
            saveDerivatives(currentCategory, derivatives);

            closeDerivativeModal();
            updateDerivativesSection(currentCategory);

            alert(`âœ… "${name}" íŒŒìƒ ì œì•ˆì„œê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!\nHTML ì „ì²´ê°€ ë…ë¦½ì ìœ¼ë¡œ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.`);
        }

        // íŒŒìƒë³¸ ì—´ê¸°
        function openDerivative(category, id) {
            const derivatives = getDerivatives(category);
            const derivative = derivatives.find(d => d.id === id);

            if (derivative) {
                // URLì— íŒŒìƒë³¸ IDì™€ ì¹´í…Œê³ ë¦¬ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ì¶”ê°€
                const url = `${derivative.url}?derivative=${id}&category=${category}&name=${encodeURIComponent(derivative.name)}`;
                window.open(url, '_blank');
            }
        }

        // íŒŒìƒë³¸ ì´ë¦„ ìˆ˜ì •
        function editDerivativeName(category, id) {
            const derivatives = getDerivatives(category);
            const derivative = derivatives.find(d => d.id === id);

            if (derivative) {
                const newName = prompt('ìƒˆ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”:', derivative.name);

                if (newName && newName.trim()) {
                    derivative.name = newName.trim();
                    saveDerivatives(category, derivatives);
                    updateDerivativesSection(category);
                }
            }
        }

        // íŒŒìƒë³¸ ì‚­ì œ
        function deleteDerivative(category, id) {
            if (!confirm('ì´ íŒŒìƒ ì œì•ˆì„œë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;

            let derivatives = getDerivatives(category);
            derivatives = derivatives.filter(d => d.id !== id);
            saveDerivatives(category, derivatives);
            updateDerivativesSection(category);

            alert('âœ… íŒŒìƒ ì œì•ˆì„œê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ í‘œì¤€ ì œì•ˆì„œ í‘œì‹œ
        window.addEventListener('DOMContentLoaded', function() {
            const standardCategory = localStorage.getItem('standardProposal');

            if (standardCategory) {
                const card = document.querySelector(`[data-category="${standardCategory}"]`);
                if (card) {
                    const badge = document.createElement('div');
                    badge.className = 'standard-badge';
                    badge.textContent = 'â­ í‘œì¤€';
                    card.insertBefore(badge, card.firstChild);

                    // ê¸°ë³¸ ì œì•ˆì„œ í¸ì§‘ ë²„íŠ¼ í‘œì‹œ
                    const editBtn = document.getElementById(`editBaseBtn-${standardCategory}`);
                    if (editBtn) {
                        editBtn.style.display = 'block';
                    }

                    showDerivativesSection(standardCategory);
                }
            }
        });

        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        document.getElementById('derivativeModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeDerivativeModal();
            }
        });

        document.getElementById('htmlEditorModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeHtmlEditorModal();
            }
        });

        // Enter í‚¤ë¡œ ìƒì„±
        document.getElementById('derivativeName').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                createDerivative();
            }
        });
    </script>
</body>
</html>
